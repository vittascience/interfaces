(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.microbitFs={}))})(this,function(e){'use strict';var Oe=Number.isInteger,Be=String.prototype,Le=Math.floor,Re=Math.ceil,De=Math.max,Me=Math.pow,Ce=Math.min;function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}function n(e){"@babel/helpers - typeof";return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t){return l(e)||d(e,t)||c(e,t)||h()}function l(e){if(Array.isArray(e))return e}function d(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!(t&&n.length===t));r=!0);}catch(e){a=!0,s=e}finally{try{r||null==o["return"]||o["return"]()}finally{if(a)throw s}}return n}}function c(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=c(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a,s=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(t){l=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function p(e){return 255&-e.reduce(function(e,t){return e+t},0)}function y(e,t){var n=e.reduce(function(e,t){return e+t},0),r=t.reduce(function(e,t){return e+t},0);return 255&-(n+r)}function m(e){return e.toString(16).toUpperCase().padStart(2,"0")}function E(e){var t=new Ss;return t.encode(e)}function S(e){var t=new Es;return t.decode(e)}function x(e){return e.replace(":::::::::::::::::::::::::::::::::::::::::::\n","")}function P(e){var t=e.length+4;t%16&&(t+=16-t%16);var n=new Uint8Array(t).fill(0);return n[0]=77,n[1]=80,n[2]=255&e.length,n[3]=255&e.length>>8,n.set(e,4),n}function b(t){var n;if("string"==typeof t){var r=x(t);n=ys.fromHex(r)}else n=t;var a=n.slicePad(e.AppendedBlock.StartAdd,2,255);return a[0]===77&&a[1]===80}function _(e){if(0!=e.length%2)throw new Error("Hex string \""+e+"\" is not divisible by 2.");var t=e.match(/.{1,2}/g);return t?new Uint8Array(t.map(function(t){var n=Number.isNaN,r=parseInt(t,16);if(n(r))throw new Error("There were some non-hex characters in \""+e+"\".");else return r})):new Uint8Array}function A(e){return e.toString(16).toUpperCase().padStart(2,"0")}function I(e){return e.reduce(function(e,t){return e+t.toString(16).toUpperCase().padStart(2,"0")},"")}function v(e){var t=e.reduce(function(e,t){return e+t.length},0),n=new Uint8Array(t);return e.reduce(function(e,t){return n.set(t,e),e+t.length},0),n}function T(e){return!!(e>=zs.Data&&e<=zs.StartLinearAddress||e>=zs.BlockStart&&e<=zs.OtherData)}function F(e){var t=e.reduce(function(e,t){return e+t},0);return 255&-t}function O(e,t,n){if(0>e||65535<e)throw new Error("Record ("+t+") address out of range: "+e);var r=n.length;if(r>32)throw new Error("Record ("+t+") data has too many bytes ("+r+").");if(!T(t))throw new Error("Record type '"+t+"' is not valid.");var a=v([new Uint8Array([r,e>>8,255&e,t]),n]),s=I(a),i=A(F(a));return":"+s+i}function B(e){if(e.length<Ks)throw new Error("Record length too small: "+e);if(e.length>Xs)throw new Error("Record length is too large: "+e);if(":"!==e[0])throw new Error("Record does not start with a \":\": "+e);return!0}function L(e){B(e);var t=$s+2+4,n=e.slice(t,t+2),r=parseInt(n,16);if(!T(r))throw new Error("Record type '"+n+"' from record '"+e+"' is not valid.");return r}function R(t){try{return _(t.slice(Gs,-2))}catch(n){throw new Error("Could not parse Intel Hex record \""+t+"\": "+n.message)}}function D(t){B(t);var n;try{n=_(t.substring(1))}catch(n){throw new Error("Could not parse Intel Hex record \""+t+"\": "+n.message)}var r=n[0],a=1,s=(n[a]<<8)+n[a+1],i=a+2,o=n[i],l=i+1,d=l+r,c=n.slice(l,d),g=n[d],h=d+1;if(n.length>h)throw new Error("Parsed record \""+t+"\" is larger than indicated by the byte count."+("\n\tExpected: "+h+"; Length: "+n.length+"."));return{byteCount:r,address:s,recordType:o,data:c,checksum:g}}function M(){return":00000001FF"}function C(e){if(0>e||4294967295<e)throw new Error("Address '"+e+"' for Extended Linear Address record is out of range.");return O(0,zs.ExtendedLinearAddress,new Uint8Array([255&e>>24,255&e>>16]))}function H(e){if(0>e||65535<e)throw new Error("Board ID out of range when creating Block Start record.");return O(0,zs.BlockStart,new Uint8Array([255&e>>8,255&e,192,222]))}function N(e){switch(e){case 4:return":0400000BFFFFFFFFF5";case 12:return":0C00000BFFFFFFFFFFFFFFFFFFFFFFFFF5";default:var t=new Uint8Array(e).fill(255);return O(0,zs.BlockEnd,t);}}function U(e){var t=new Uint8Array(e).fill(255);return O(0,zs.PaddedData,t)}function z(e,t){var n=D(e),r=new Uint8Array(n.data.length+4);r[0]=n.data.length,r[1]=n.address>>8,r[2]=255&n.address,r[3]=t,r.set(n.data,4);var a=I(r),s=A(F(r));return":"+a+s}function Y(e){var t=R(e);if(2!==t.length||15&t[0]||0!==t[1])throw new Error("Invalid Extended Segment Address record "+e);var n=t[0]<<12;return C(n)}function $(e){var t=e.replace(/\r/g,"").split("\n");return t.filter(Boolean)}function w(e){for(var t=16,n=0,r=0,a=e;r<a.length;r++){var s=a[r],i=(s.length-Ks)/2;if(i>t?(t=i,n=0):i===t&&n++,12<n)break}if(t>32)throw new Error("Intel Hex record data size is too large: "+t);return t}function V(e,t){var n=!Zs.includes(t),r=H(t),a=C(0),s=a.length,i=r.length,o=N(0).length,l=U(0).length,d=$(e),c=w(d);if(!d.length)return"";if(X(d))throw new Error("Board ID "+t+" Hex is already a Universal Hex.");for(var g=0,h=[];g<d.length;){var u=0,p=L(d[g]);p===zs.ExtendedLinearAddress?(a=d[g],g++):p===zs.ExtendedSegmentAddress&&(a=Y(d[g]),g++),h.push(a),u+=s+1,h.push(r),u+=i+1,u+=o+1;for(var f=!1;d[g]&&512>=u+d[g].length+1;){var y=d[g++],m=L(y);if(n&&m===zs.Data)y=z(y,zs.CustomData);else if(m===zs.ExtendedLinearAddress)a=y;else if(m===zs.ExtendedSegmentAddress)y=Y(y),a=y;else if(m===zs.EndOfFile){f=!0;break}h.push(y),u+=y.length+1}if(f){if(g!==d.length)if(Z(d))throw new Error("Board ID "+t+" Hex is from MakeCode, import this hex into the MakeCode editor to create a Universal Hex.");else throw new Error("EoF record found at record "+g+" of "+d.length+" in Board ID "+t+" hex");h.push(N(0)),h.push(M())}else{for(;512-u>2*c;){var y=U(Ce((512-u-(l+1))/2,c));h.push(y),u+=y.length+1}h.push(N((512-u)/2))}}return h.push(""),h.join("\n")}function G(e,t){var n=[],r=0,a=0,s=function(e){r+=e.length+1},i=function(e){n.push(e),s(e)},o=$(e);if(!o.length)return"";if(X(o))throw new Error("Board ID "+t+" Hex is already a Universal Hex.");var l=L(o[0]);l===zs.ExtendedLinearAddress?(i(o[0]),a++):l===zs.ExtendedSegmentAddress?(i(Y(o[0])),a++):i(C(0)),i(H(t));for(var d=!Zs.includes(t),c=!1;a<o.length;){var g=o[a++],h=L(g);if(h===zs.Data)i(d?z(g,zs.CustomData):g);else if(h===zs.ExtendedSegmentAddress)i(Y(g));else if(h===zs.ExtendedLinearAddress)i(g);else if(h===zs.EndOfFile){c=!0;break}}if(a!==o.length)if(Z(o))throw new Error("Board ID "+t+" Hex is from MakeCode, import this hex into the MakeCode editor to create a Universal Hex.");else throw new Error("EoF record found at record "+a+" of "+o.length+" in Board ID "+t+" hex ");s(N(0));for(var u=U(0).length+1,p=w(o),f=(512-r%512)%512;f>2*p;){var y=f-u>>1,g=U(Ce(y,p));i(g),f=(512-r%512)%512}return n.push(N(f>>1)),c&&n.push(M()),n.push(""),n.join("\n")}function W(e,t){if(void 0===t&&(t=!1),!e.length)return"";for(var n,r=t?V:G,a=M()+"\n",s=[],o=0;o<e.length-1;o++)n=r(e[o].hex,e[o].boardId),n.endsWith(a)&&(n=n.slice(0,n.length-a.length)),s.push(n);var l=r(e[e.length-1].hex,e[e.length-1].boardId);return s.push(l),l.endsWith(a)||s.push(a),s.join("")}function K(e){if(e.slice(0,":02000004".length)!==":02000004")return!1;for(var t=9;":"!==e[++t]&&t<Xs+3;);return!(":0400000A"!==e.slice(t,t+9))}function X(e){return L(e[0])===zs.ExtendedLinearAddress&&L(e[1])===zs.BlockStart&&L(e[e.length-1])===zs.EndOfFile}function Z(e){var t=e.indexOf(M());if(t===e.length-1)for(;0<--t;)if(e[t]===C(536870912))return!0;for(;++t<e.length;){if(L(e[t])===zs.OtherData)return!0;if(e[t]===C(536870912))return!0}return!1}function q(e){var t=$(e);if(!t.length)throw new Error("Empty Universal Hex.");if(!X(t))throw new Error("Universal Hex format invalid.");for(var n=[zs.Data,zs.EndOfFile,zs.ExtendedSegmentAddress,zs.StartSegmentAddress],r={},a=0,s=0;s<t.length;s++){var o=t[s],l=L(o);if(n.includes(l))r[a].hex.push(o);else if(l===zs.CustomData)r[a].hex.push(z(o,zs.Data));else if(l===zs.ExtendedLinearAddress){var d=t[s+1];if(L(d)===zs.BlockStart){var c=R(d);if(4!==c.length)throw new Error("Block Start record invalid: "+d);a=(c[0]<<8)+c[1],r[a]=r[a]||{boardId:a,lastExtAdd:o,hex:[o]},s++}r[a].lastExtAdd!==o&&(r[a].lastExtAdd=o,r[a].hex.push(o))}}var g=[];return Object.keys(r).forEach(function(e){var t=r[e].hex;t[t.length-1]!==M()&&(t[t.length]=M()),g.push({boardId:r[e].boardId,hex:t.join("\n")+"\n"})}),g}function J(e,t){var n=e.slicePad(t,8,255);return new DataView(n.buffer).getUint32(0,!0)}function Q(e,t){var n=e.slicePad(t,4,255);return new DataView(n.buffer).getUint32(0,!0)}function ee(e,t){var n=e.slicePad(t,2,255);return new DataView(n.buffer).getUint16(0,!0)}function te(e,t){var n=e.slicePad(t,1,255);return n[0]}function ne(e,t){for(var n=e.slice(t).get(t),r=0;r<n.length&&0!==n[r];)r++;if(r===n.length)return"";var a=n.slice(0,r);return S(a)}function re(e,t){void 0===t&&(t=1024);for(var n=0,r=new Uint8Array(new Uint32Array([1501507838]).buffer),a=new Uint8Array(new Uint32Array([3249657757]).buffer),s=e.paginate(t,255).entries(),i=s.next();!i.done;i=s.next())if(i.value){var o=i.value[1],l=o.subarray(-Qs.magic2);if(Ps(l,a)&&Ps(o.subarray(-Qs.magic1,-(Qs.magic1-4)),r)){var d=i.value[0];n=d+t;break}}var c=ee(e,n-Qs.version),g=ee(e,n-Qs.tableLength),h=ee(e,n-Qs.regionCount),u=ee(e,n-Qs.pageSizeLog2),p=Me(2,u),f=n-Qs.magic1;return{pageSizeLog2:u,pageSize:p,regionCount:h,tableLength:g,version:c,endAddress:n,startAddress:f}}function ae(e,t){var n=te(e,t-ei.id),r=te(e,t-ei.hashType),a=J(e,t-ei.hashData),s="";r===Js.pointer&&(s=ne(e,4294967295&a));var i=ee(e,t-ei.startPage),o=Q(e,t-ei.lengthBytes);return{id:n,startPage:i,lengthBytes:o,hashType:r,hashData:a,hashPointerData:s}}function se(e){for(var t=re(e,4096),n={},r=0;r<t.regionCount;r++){var a=t.startAddress-r*ni,s=ae(e,a);n[s.id]=s}if(!n.hasOwnProperty(qs.microPython))throw new Error("Could not find a MicroPython region in the regions table.");if(!n.hasOwnProperty(qs.fs))throw new Error("Could not find a File System region in the regions table.");var o=n[qs.microPython].startPage*t.pageSize+n[qs.microPython].lengthBytes;o=t.endAddress;var l=n[qs.microPython].hashPointerData,d=n[qs.fs].startPage*t.pageSize,c=d+n[qs.fs].lengthBytes;return{flashPageSize:t.pageSize,flashSize:524288,flashStartAddress:0,flashEndAddress:524288,runtimeStartAddress:0,runtimeEndAddress:o,fsStartAddress:d,fsEndAddress:c,uPyVersion:l,deviceVersion:"V2"}}function ie(e){for(var t,n=oe(e),r=0,a=ri;r<a.length;r++)if(t=a[r],t.magicHeader===n)return!0;return!1}function oe(e){return Q(e,ti.MagicValue)}function le(e){for(var t,n=oe(e),r=0,a=ri;r<a.length;r++)if(t=a[r],t.magicHeader===n)return t.deviceVersion;throw new Error("Cannot find device version, unknown UICR Magic value")}function de(e){for(var t,n=oe(e),r=0,a=ri;r<a.length;r++)if(t=a[r],t.magicHeader===n)return t.flashSize;throw new Error("Cannot find flash size, unknown UICR Magic value")}function ce(e){for(var t,n=oe(e),r=0,a=ri;r<a.length;r++)if(t=a[r],t.magicHeader===n)return t.fsEnd;throw new Error("Cannot find fs end address, unknown UICR Magic value")}function ge(e){var t=Q(e,ti.PageSize);return Me(2,t)}function he(e){return ee(e,ti.StartPage)}function ue(e){return ee(e,ti.PagesUsed)}function pe(e){return Q(e,ti.VersionLocation)}function fe(e){var t=e.slice(268439744);if(!ie(t))throw new Error("Could not find valid MicroPython UICR data.");var n=ge(t),r=de(t),a=he(t),s=a*n,i=ue(t),o=i*n,l=pe(t),d=ne(e,l),c=le(t),g=ce(t);return{flashPageSize:n,flashSize:r,flashStartAddress:s,flashEndAddress:s+r,runtimeStartAddress:s,runtimeEndAddress:o,fsStartAddress:o,fsEndAddress:g,uicrStartAddress:ti.MagicValue,uicrEndAddress:ti.End,uPyVersion:d,deviceVersion:c}}function ye(e){var t="";try{return fe(e)}catch(e){t+=e.message+"\n"}try{return se(e)}catch(e){throw new Error(t+e.message)}}function me(e){var t=ys.fromHex(e),n=ye(t),r=t.slice(n.runtimeStartAddress,n.runtimeEndAddress-n.runtimeStartAddress).asHexString().replace(":00000001FF","");return{originalIntelHex:e,originalMemMap:t,uPyIntelHex:r,uPyEndAddress:n.runtimeEndAddress,fsSize:ke(t)}}function Ee(e){for(var t=[],n=Se(e),r=Pe(e),a=n,s=1;a<r;){var i=e.slicePad(a,1,255)[0];(255===i||0===i)&&t.push(s),s++,a+=128}return t}function Se(e){var t=ye(e),n=xe(e)-32256,r=De(t.fsStartAddress,n);if(r%t.flashPageSize)throw new Error("File system start address from UICR does not align with flash page size.");return r}function xe(t){var n=ye(t),r=n.fsEndAddress;return"V1"===n.deviceVersion&&(b(t)&&(r=e.AppendedBlock.StartAdd),r-=n.flashPageSize),r}function Pe(e){var t=ye(e);return xe(e)-t.flashPageSize}function be(e){e.set(Pe(e),new Uint8Array([253]))}function _e(e,t){return Se(e)+(t-1)*128}function Ae(e,t){var n=new oi(e,t);return n.getFsFileSize()}function Ie(e,t,n){if(!t)throw new Error("File has to have a file name.");if(!n.length)throw new Error("File "+t+" has to contain data.");var r=Ee(e);if(0===r.length)throw new Error("There is no storage space left.");var a=_e(e,r[0]),s=new oi(t,n),i=s.getFsBytes(r);e.set(a,i),be(e)}function ve(e,t,n){void 0===n&&(n=!1);var r="string"==typeof e?ys.fromHex(e):e.clone();var a=ye(r);return Object.keys(t).forEach(function(e){Ie(r,e,t[e])}),n?r.slicePad(0,a.flashSize):r.asHexString()+"\n"}function Te(e,t){var n=e.originalMemMap.clone();return Object.keys(t).forEach(function(e){Ie(n,e,t[e])}),e.uPyIntelHex+n.slice(e.uPyEndAddress).asHexString()+"\n"}function Fe(e){var t="string"==typeof e?ys.fromHex(e):e.clone();for(var n=Se(t),r=Pe(t),a={},s=[],i=n,o=1;i<r;){var l=t.slicePad(i,128,255),d=l[0];255!==d&&0!==d&&253!==d&&(a[o]=l,254===d&&s.push(o)),o++,i+=128}for(var c={},g=0,h=s;g<h.length;g++){var u=h[g],p=a[u],f=p[1],y=p[2],m=3+y,E=S(p.slice(3,m));if(c.hasOwnProperty(E))throw new Error("Found multiple files named: "+E+".");c[E]=new Uint8Array(0);for(var x=p,P=u,b=Object.keys(a).length+1;b--;){var _=x[127];if(255===_){c[E]=xs(c[E],x.slice(m,1+f));break}else c[E]=xs(c[E],x.slice(m,127));var A=a[_];if(!A)throw new Error("Chunk "+P+" points to unused index "+_+".");if(A[0]!==P)throw new Error("Chunk index "+_+" did not link to previous chunk index "+P+".");x=A,P=_,m=1}if(0>=b)throw new Error("Malformed file chunks did not link correctly.")}return c}function ke(e){var t=ye(e),n=Se(e),r=xe(e);return r-n-t.flashPageSize}var He=function(e){try{return!!e()}catch(t){return!0}},Ne=!He(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Ue=!1,ze=t(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),Ye=t(function(e){var t=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)}),$e=Ye.version,we=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Ve=function(e){if(!we(e))throw TypeError(e+" is not an object!");return e},je=ze.document,Ge=we(je)&&we(je.createElement),We=function(e){return Ge?je.createElement(e):{}},Ke=!Ne&&!He(function(){return 7!=Object.defineProperty(We("div"),"a",{get:function(){return 7}}).a}),Xe=function(e,t){if(!we(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!we(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!we(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!we(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Ze=Object.defineProperty,qe=Ne?Object.defineProperty:function(e,t,n){if(Ve(e),t=Xe(t,!0),Ve(n),Ke)try{return Ze(e,t,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},f={f:qe},Je=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Qe=Ne?function(e,t,n){return f.f(e,t,Je(1,n))}:function(e,t,n){return e[t]=n,e},et={}.hasOwnProperty,tt=function(e,t){return et.call(e,t)},nt=0,rt=Math.random(),st=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++nt+rt).toString(36))},it=t(function(e){var t=ze["__core-js_shared__"]||(ze["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=n===void 0?{}:n)})("versions",[]).push({version:Ye.version,mode:"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),ot=it("native-function-to-string",Function.toString),lt=t(function(e){var t=st("src"),n="toString",r=(""+ot).split(n);Ye.inspectSource=function(e){return ot.call(e)},(e.exports=function(e,n,a,s){var i="function"==typeof a;i&&(tt(a,"name")||Qe(a,"name",n));e[n]===a||(i&&(tt(a,t)||Qe(a,t,e[n]?""+e[n]:r.join(n+""))),e===ze?e[n]=a:s?e[n]?e[n]=a:Qe(e,n,a):(delete e[n],Qe(e,n,a)))})(Function.prototype,n,function(){return"function"==typeof this&&this[t]||ot.call(this)})}),dt=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},ct=function(e,t,n){return(dt(e),void 0===t)?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:3===n?function(n,r,a){return e.call(t,n,r,a)}:function(){return e.apply(t,arguments)}},gt="prototype",ht=function(e,t,n){var r,a,s,i,o=e&ht.F,l=e&ht.G,d=e&ht.S,c=e&ht.P,g=e&ht.B,h=l?ze:d?ze[t]||(ze[t]={}):(ze[t]||{})[gt],u=l?Ye:Ye[t]||(Ye[t]={}),p=u[gt]||(u[gt]={});for(r in l&&(n=t),n)a=!o&&h&&void 0!==h[r],s=(a?h:n)[r],i=g&&a?ct(s,ze):c&&"function"==typeof s?ct(Function.call,s):s,h&&lt(h,r,s,e&ht.U),u[r]!=s&&Qe(u,r,i),c&&p[r]!=s&&(p[r]=s)};ze.core=Ye,ht.F=1,ht.G=2,ht.S=4,ht.P=8,ht.B=16,ht.W=32,ht.U=64,ht.R=128;for(var ut,pt=ht,ft=st("typed_array"),yt=st("view"),mt=!!(ze.ArrayBuffer&&ze.DataView),Et=mt,St=0,xt=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"];St<9;)(ut=ze[xt[St++]])?(Qe(ut.prototype,ft,!0),Qe(ut.prototype,yt,!0)):Et=!1;var Pt={ABV:mt,CONSTR:Et,TYPED:ft,VIEW:yt},bt=function(e,t,n){for(var r in t)lt(e,r,t[r],n);return e},_t=function(e,t,n,r){if(!(e instanceof t)||r!==void 0&&r in e)throw TypeError(n+": incorrect invocation!");return e},At=function(e){return isNaN(e=+e)?0:(0<e?Le:Re)(e)},It=function(e){return 0<e?Ce(At(e),9007199254740991):0},vt=function(e){if(e===void 0)return 0;var t=At(e),n=It(t);if(t!==n)throw RangeError("Wrong length!");return n},Tt={}.toString,Ft=function(e){return Tt.call(e).slice(8,-1)},kt=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Ft(e)?e.split(""):Object(e)},Ot=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},Bt=function(e){return kt(Ot(e))},Lt=function(e,t){return e=At(e),0>e?De(e+t,0):Ce(e,t)},Rt=function(e){return function(t,n,r){var a,s=Bt(t),i=It(s.length),o=Lt(r,i);if(e&&n!=n){for(;i>o;)if(a=s[o++],a!=a)return!0;}else for(;i>o;o++)if((e||o in s)&&s[o]===n)return e||o||0;return!e&&-1}},Dt=it("keys"),Mt=function(e){return Dt[e]||(Dt[e]=st(e))},Ct=Rt(!1),Ht=Mt("IE_PROTO"),Nt=function(e,t){var n,r=Bt(e),a=0,s=[];for(n in r)n!=Ht&&tt(r,n)&&s.push(n);for(;t.length>a;)tt(r,n=t[a++])&&(~Ct(s,n)||s.push(n));return s},Ut=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],zt=Ut.concat("length","prototype"),Yt=Object.getOwnPropertyNames||function(e){return Nt(e,zt)},$t={f:Yt},wt=function(e){return Object(Ot(e))},Vt=function(e){for(var t=wt(this),n=It(t.length),r=arguments.length,a=Lt(1<r?arguments[1]:void 0,n),s=2<r?arguments[2]:void 0,i=void 0===s?n:Lt(s,n);i>a;)t[a++]=e;return t},jt=t(function(e){var t=it("wks"),n=ze.Symbol,r="function"==typeof n,a=e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:st)("Symbol."+e))};a.store=t}),Gt=f.f,Wt=jt("toStringTag"),Kt=function(e,t,n){e&&!tt(e=n?e:e.prototype,Wt)&&Gt(e,Wt,{configurable:!0,value:t})},Xt=t(function(e,t){function n(t,n,r){var a,o,l,d=Array(r),g=8*r-n-1,h=(1<<g)-1,u=h>>1,p=23===n?v(2,-24)-v(2,-77):0,f=0,y=0>t||0===t&&0>1/t?1:0;for(t=I(t),t!=t||t===_?(o=t==t?0:1,a=h):(a=T(F(t)/k),1>t*(l=v(2,-a))&&(a--,l*=2),t+=1<=a+u?p/l:p*v(2,1-u),2<=t*l&&(a++,l/=2),a+u>=h?(o=0,a=h):1<=a+u?(o=(t*l-1)*v(2,n),a+=u):(o=t*v(2,u-1)*v(2,n),a=0));8<=n;d[f++]=255&o,o/=256,n-=8);for(a=a<<n|o,g+=n;0<g;d[f++]=255&a,a/=256,g-=8);return d[--f]|=128*y,d}function r(t,n,r){var a,o=8*r-n-1,l=(1<<o)-1,d=l>>1,c=o-7,g=r-1,h=t[g--],u=127&h;for(h>>=7;0<c;u=256*u+t[g],g--,c-=8);for(a=u&(1<<-c)-1,u>>=-c,c+=n;0<c;a=256*a+t[g],g--,c-=8);if(0===u)u=1-d;else{if(u===l)return a?NaN:h?-_:_;a+=v(2,n),u-=d}return(h?-1:1)*a*v(2,u-n)}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function s(e){return[255&e]}function i(e){return[255&e,255&e>>8]}function o(e){return[255&e,255&e>>8,255&e>>16,255&e>>24]}function l(e){return n(e,52,8)}function d(e){return n(e,23,4)}function c(e,t,n){p(e.prototype,t,{get:function(){return this[n]}})}function g(e,t,n,r){var a=vt(+n);if(a+t>e[D])throw b("Wrong index!");var s=e[R]._b,i=a+e[M],o=s.slice(i,i+t);return r?o:o.reverse()}function h(e,t,n,r,a,s){var o=vt(+n);if(o+t>e[D])throw b("Wrong index!");for(var l=e[R]._b,d=o+e[M],c=r(+a),g=0;g<t;g++)l[d+g]=c[s?g:t-g-1]}var u=$t.f,p=f.f,y="ArrayBuffer",m="DataView",E="prototype",S=ze[y],x=ze[m],P=ze.Math,b=ze.RangeError,_=ze.Infinity,A=S,I=P.abs,v=Me,T=Le,F=P.log,k=P.LN2,O="buffer",B="byteLength",L="byteOffset",R=Ne?"_b":O,D=Ne?"_l":B,M=Ne?"_o":L;if(!Pt.ABV)S=function(e){_t(this,S,y);var t=vt(e);this._b=Vt.call(Array(t),0),this[D]=t},x=function(e,t,n){_t(this,x,m),_t(e,S,m);var r=e[D],a=At(t);if(0>a||a>r)throw b("Wrong offset!");if(n=void 0===n?r-a:It(n),a+n>r)throw b("Wrong length!");this[R]=e,this[M]=a,this[D]=n},Ne&&(c(S,B,"_l"),c(x,O,"_b"),c(x,B,"_l"),c(x,L,"_o")),bt(x[E],{getInt8:function(e){return g(this,1,e)[0]<<24>>24},getUint8:function(e){return g(this,1,e)[0]},getInt16:function(e){var t=g(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=g(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return a(g(this,4,e,arguments[1]))},getUint32:function(e){return a(g(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return r(g(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return r(g(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){h(this,1,e,s,t)},setUint8:function(e,t){h(this,1,e,s,t)},setInt16:function(e,t){h(this,2,e,i,t,arguments[2])},setUint16:function(e,t){h(this,2,e,i,t,arguments[2])},setInt32:function(e,t){h(this,4,e,o,t,arguments[2])},setUint32:function(e,t){h(this,4,e,o,t,arguments[2])},setFloat32:function(e,t){h(this,4,e,d,t,arguments[2])},setFloat64:function(e,t){h(this,8,e,l,t,arguments[2])}});else{if(!He(function(){S(1)})||!He(function(){new S(-1)})||He(function(){return new S,new S(1.5),new S(NaN),S.name!=y})){S=function(e){return _t(this,S),new A(vt(e))};for(var C,H=S[E]=A[E],N=u(A),U=0;N.length>U;)(C=N[U++])in S||Qe(S,C,A[C]);H.constructor=S}var z=new x(new S(2)),Y=x[E].setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),(z.getInt8(0)||!z.getInt8(1))&&bt(x[E],{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},!0)}Kt(S,y),Kt(x,m),Qe(x[E],Pt.VIEW,!0),t[y]=S,t[m]=x}),Zt=jt("toStringTag"),qt="Arguments"==Ft(function(){return arguments}()),Jt=function(e,t){try{return e[t]}catch(t){}},Qt=function(e){var t,n,r;return e===void 0?"Undefined":null===e?"Null":"string"==typeof(n=Jt(t=Object(e),Zt))?n:qt?Ft(t):"Object"==(r=Ft(t))&&"function"==typeof t.callee?"Arguments":r},en={},tn=jt("iterator"),nn=Array.prototype,rn=function(e){return e!==void 0&&(en.Array===e||nn[tn]===e)},an=Object.keys||function(e){return Nt(e,Ut)},sn=Ne?Object.defineProperties:function(e,t){Ve(e);for(var n,r=an(t),a=r.length,s=0;a>s;)f.f(e,n=r[s++],t[n]);return e},on=ze.document,ln=on&&on.documentElement,dn=Mt("IE_PROTO"),cn=function(){},gn="prototype",hn=function(){var e,t=We("iframe"),n=Ut.length,r="<",a=">";for(t.style.display="none",ln.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),hn=e.F;n--;)delete hn[gn][Ut[n]];return hn()},un=Object.create||function(e,t){var n;return null===e?n=hn():(cn[gn]=Ve(e),n=new cn,cn[gn]=null,n[dn]=e),void 0===t?n:sn(n,t)},pn=Mt("IE_PROTO"),fn=Object.prototype,yn=Object.getPrototypeOf||function(e){return e=wt(e),tt(e,pn)?e[pn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?fn:null},mn=jt("iterator"),En=Ye.getIteratorMethod=function(e){if(e!=null)return e[mn]||e["@@iterator"]||en[Qt(e)]},Sn=Array.isArray||function(e){return"Array"==Ft(e)},xn=jt("species"),Pn=function(e){var t;return Sn(e)&&(t=e.constructor,"function"==typeof t&&(t===Array||Sn(t.prototype))&&(t=void 0),we(t)&&(t=t[xn],null===t&&(t=void 0))),void 0===t?Array:t},bn=function(e,t){return new(Pn(e))(t)},_n=function(e,t){var n=1==e,r=4==e,a=6==e,s=t||bn;return function(t,i,o){for(var l,d,c=wt(t),g=kt(c),h=ct(i,o,3),u=It(g.length),p=0,f=n?s(t,u):2==e?s(t,0):void 0;u>p;p++)if((5==e||a||p in g)&&(l=g[p],d=h(l,p,c),e))if(n)f[p]=d;else if(d)switch(e){case 3:return!0;case 5:return l;case 6:return p;case 2:f.push(l);}else if(r)return!1;return a?-1:3==e||r?r:f}},An=jt("species"),In=function(e,t){var n,r=Ve(e).constructor;return r===void 0||(n=Ve(r)[An])==null?t:dt(n)},vn=jt("unscopables"),Tn=Array.prototype;Tn[vn]==null&&Qe(Tn,vn,{});var Fn=function(e){Tn[vn][e]=!0},kn=function(e,t){return{value:t,done:!!e}},On={};Qe(On,jt("iterator"),function(){return this});var Bn=function(e,t,n){e.prototype=un(On,{next:Je(1,n)}),Kt(e,t+" Iterator")},Ln=jt("iterator"),Rn=!([].keys&&"next"in[].keys()),Dn="keys",Mn="values",Cn=function(){return this},Hn=function(e,t,n,r,a,s,i){Bn(n,t,r);var o,l,d,c=function(e){return!Rn&&e in p?p[e]:e===Dn?function(){return new n(this,e)}:e===Mn?function(){return new n(this,e)}:function(){return new n(this,e)}},g=t+" Iterator",h=a==Mn,u=!1,p=e.prototype,f=p[Ln]||p["@@iterator"]||a&&p[a],y=f||c(a),m=a?h?c("entries"):y:void 0,E="Array"==t?p.entries||f:f;if(E&&(d=yn(E.call(new e)),d!==Object.prototype&&d.next&&(Kt(d,g,!0),"function"!=typeof d[Ln]&&Qe(d,Ln,Cn))),h&&f&&f.name!==Mn&&(u=!0,y=function(){return f.call(this)}),(Rn||u||!p[Ln])&&Qe(p,Ln,y),en[t]=y,en[g]=Cn,a)if(o={values:h?y:c(Mn),keys:s?y:c(Dn),entries:m},i)for(l in o)l in p||lt(p,l,o[l]);else pt(pt.P+pt.F*(Rn||u),t,o);return o},Nn=Hn(Array,"Array",function(e,t){this._t=Bt(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,kn(1)):"keys"==t?kn(0,n):"values"==t?kn(0,e[n]):kn(0,[n,e[n]])},"values");en.Arguments=en.Array,Fn("keys"),Fn("values"),Fn("entries");var Un=jt("iterator"),zn=!1;try{var Yn=[7][Un]();Yn["return"]=function(){zn=!0},Array.from(Yn,function(){throw 2})}catch(t){}var $n=function(e,t){if(!t&&!zn)return!1;var n=!1;try{var r=[7],a=r[Un]();a.next=function(){return{done:n=!0}},r[Un]=function(){return a},e(r)}catch(t){}return n},wn=jt("species"),Vn=function(e){var t=ze[e];Ne&&t&&!t[wn]&&f.f(t,wn,{configurable:!0,get:function(){return this}})},jn=[].copyWithin||function(e,t){var n=wt(this),r=It(n.length),a=Lt(e,r),s=Lt(t,r),i=2<arguments.length?arguments[2]:void 0,o=Ce((i===void 0?r:Lt(i,r))-s,r-a),l=1;for(s<a&&a<s+o&&(l=-1,s+=o-1,a+=o-1);0<o--;)s in n?n[a]=n[s]:delete n[a],a+=l,s+=l;return n},Gn={}.propertyIsEnumerable,Wn={f:Gn},Kn=Object.getOwnPropertyDescriptor,Xn=Ne?Kn:function(e,t){if(e=Bt(e),t=Xe(t,!0),Ke)try{return Kn(e,t)}catch(t){}return tt(e,t)?Je(!Wn.f.call(e,t),e[t]):void 0},Zn={f:Xn},qn=t(function(e){if(Ne){var t=Ue,n=ze,r=He,a=pt,s=Pt,i=Xt,o=_t,l=Qe,d=bt,c=It,g=vt,h=Lt,u=Xe,p=tt,y=Qt,m=we,E=wt,S=$t.f,x=st,P=jt,b=_n,_=Rt,A=In,I=Nn,v=f,T=Zn,F=v.f,k=T.f,O=n.RangeError,B=n.TypeError,L=n.Uint8Array,R="ArrayBuffer",D="Shared"+R,M="BYTES_PER_ELEMENT",C="prototype",H=Array[C],N=i.ArrayBuffer,U=i.DataView,z=b(0),Y=b(2),$=b(3),w=b(4),V=b(5),j=b(6),G=_(!0),W=_(!1),K=I.values,X=I.keys,Z=I.entries,q=H.lastIndexOf,J=H.reduce,Q=H.reduceRight,ee=H.join,te=H.sort,ne=H.slice,re=H.toString,ae=H.toLocaleString,se=P("iterator"),ie=P("toStringTag"),oe=x("typed_constructor"),le=x("def_constructor"),de=s.CONSTR,ce=s.TYPED,ge=s.VIEW,he="Wrong length!",ue=b(1,function(e,t){return Ee(A(e,e[le]),t)}),pe=r(function(){return 1===new L(new Uint16Array([1]).buffer)[0]}),fe=!!L&&!!L[C].set&&r(function(){new L(1).set({})}),ye=function(e,t){var n=At(e);if(0>n||n%t)throw O("Wrong offset!");return n},me=function(e){if(m(e)&&ce in e)return e;throw B(e+" is not a typed array!")},Ee=function(e,t){if(!(m(e)&&oe in e))throw B("It is not a typed array constructor!");return new e(t)},Se=function(e,t){return xe(A(e,e[le]),t)},xe=function(e,t){for(var n=0,r=t.length,a=Ee(e,r);r>n;)a[n]=t[n++];return a},Pe=function(e,t,n){F(e,t,{get:function(){return this._d[n]}})},be=function(e){var t,n,r,a,s,o,l=E(e),d=arguments.length,g=1<d?arguments[1]:void 0,h=g!==void 0,u=En(l);if(u!=null&&!rn(u)){for(o=u.call(l),r=[],t=0;!(s=o.next()).done;t++)r.push(s.value);l=r}for(h&&2<d&&(g=ct(g,arguments[2],2)),t=0,n=c(l.length),a=Ee(this,n);n>t;t++)a[t]=h?g(l[t],t):l[t];return a},_e=function(){for(var e=0,t=arguments.length,n=Ee(this,t);t>e;)n[e]=arguments[e++];return n},Ae=!!L&&r(function(){ae.call(new L(1))}),Ie=function(){return ae.apply(Ae?ne.call(me(this)):me(this),arguments)},ve={copyWithin:function(e,t){return jn.call(me(this),e,t,2<arguments.length?arguments[2]:void 0)},every:function(e){return w(me(this),e,1<arguments.length?arguments[1]:void 0)},fill:function(){return Vt.apply(me(this),arguments)},filter:function(e){return Se(this,Y(me(this),e,1<arguments.length?arguments[1]:void 0))},find:function(e){return V(me(this),e,1<arguments.length?arguments[1]:void 0)},findIndex:function(e){return j(me(this),e,1<arguments.length?arguments[1]:void 0)},forEach:function(e){z(me(this),e,1<arguments.length?arguments[1]:void 0)},indexOf:function(e){return W(me(this),e,1<arguments.length?arguments[1]:void 0)},includes:function(e){return G(me(this),e,1<arguments.length?arguments[1]:void 0)},join:function(){return ee.apply(me(this),arguments)},lastIndexOf:function(){return q.apply(me(this),arguments)},map:function(e){return ue(me(this),e,1<arguments.length?arguments[1]:void 0)},reduce:function(){return J.apply(me(this),arguments)},reduceRight:function(){return Q.apply(me(this),arguments)},reverse:function(){for(var e,t=this,n=me(t).length,r=Le(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t},some:function(e){return $(me(this),e,1<arguments.length?arguments[1]:void 0)},sort:function(e){return te.call(me(this),e)},subarray:function(e,t){var n=me(this),r=n.length,a=h(e,r);return new(A(n,n[le]))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,c((t===void 0?r:h(t,r))-a))}},Te=function(e,t){return Se(this,ne.call(me(this),e,t))},Fe=function(e){me(this);var t=ye(arguments[1],1),n=this.length,r=E(e),a=c(r.length),s=0;if(a+t>n)throw O(he);for(;s<a;)this[t+s]=r[s++]},ke={entries:function(){return Z.call(me(this))},keys:function(){return X.call(me(this))},values:function(){return K.call(me(this))}},Oe=function(e,t){return m(e)&&e[ce]&&"symbol"!=typeof t&&t in e&&+t+""==t+""},Be=function(e,t){return Oe(e,t=u(t,!0))?Je(2,e[t]):k(e,t)},Re=function(e,t,n){return Oe(e,t=u(t,!0))&&m(n)&&p(n,"value")&&!p(n,"get")&&!p(n,"set")&&!n.configurable&&(!p(n,"writable")||n.writable)&&(!p(n,"enumerable")||n.enumerable)?(e[t]=n.value,e):F(e,t,n)};de||(T.f=Be,v.f=Re),a(a.S+a.F*!de,"Object",{getOwnPropertyDescriptor:Be,defineProperty:Re}),r(function(){re.call({})})&&(re=ae=function(){return ee.call(this)});var De=d({},ve);d(De,ke),l(De,se,ke.values),d(De,{slice:Te,set:Fe,constructor:function(){},toString:re,toLocaleString:Ie}),Pe(De,"buffer","b"),Pe(De,"byteOffset","o"),Pe(De,"byteLength","l"),Pe(De,"length","e"),F(De,ie,{get:function(){return this[ce]}}),e.exports=function(e,i,d,h){h=!!h;var u=e+(h?"Clamped":"")+"Array",p=n[u],f=p||{},E=p&&yn(p),x=!p||!s.ABV,P={},b=p&&p[C],_=function(t,n){var r=t._d;return r.v["get"+e](n*i+r.o,pe)},A=function(t,n,r){var a=t._d;h&&(r=0>(r=Math.round(r))?0:255<r?255:255&r),a.v["set"+e](n*i+a.o,r,pe)},I=function(e,t){F(e,t,{get:function(){return _(this,t)},set:function(e){return A(this,t,e)},enumerable:!0})};x?(p=d(function(e,t,n,r){o(e,p,u,"_d");var a,s,d,h,f=0,E=0;if(!m(t))d=g(t),s=d*i,a=new N(s);else if(t instanceof N||(h=y(t))==R||h==D){a=t,E=ye(n,i);var S=t.byteLength;if(void 0===r){if(S%i)throw O(he);if(s=S-E,0>s)throw O(he)}else if(s=c(r)*i,s+E>S)throw O(he);d=s/i}else return ce in t?xe(p,t):be.call(p,t);for(l(e,"_d",{b:a,o:E,l:s,e:d,v:new U(a)});f<d;)I(e,f++)}),b=p[C]=un(De),l(b,"constructor",p)):(!r(function(){p(1)})||!r(function(){new p(-1)})||!$n(function(e){new p,new p(null),new p(1.5),new p(e)},!0))&&(p=d(function(e,t,n,r){o(e,p,u);var a;return m(t)?t instanceof N||(a=y(t))==R||a==D?void 0===r?void 0===n?new f(t):new f(t,ye(n,i)):new f(t,ye(n,i),r):ce in t?xe(p,t):be.call(p,t):new f(g(t))}),z(E===Function.prototype?S(f):S(f).concat(S(E)),function(e){e in p||l(p,e,f[e])}),p[C]=b,!t&&(b.constructor=p));var v=b[se],T=!!v&&("values"==v.name||v.name==null),k=ke.values;l(p,oe,!0),l(b,ce,u),l(b,ge,!0),l(b,le,p),(h?new p(1)[ie]!=u:!(ie in b))&&F(b,ie,{get:function(){return u}}),P[u]=p,a(a.G+a.W+a.F*(p!=f),P),a(a.S,u,{BYTES_PER_ELEMENT:i}),a(a.S+a.F*r(function(){f.of.call(p,1)}),u,{from:be,of:_e}),M in b||l(b,M,i),a(a.P,u,ve),Vn(u),a(a.P+a.F*fe,u,{set:Fe}),a(a.P+a.F*!T,u,ke),t||b.toString==re||(b.toString=re),a(a.P+a.F*r(function(){new p(1).slice()}),u,{slice:Te}),a(a.P+a.F*(r(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!r(function(){b.toLocaleString.call([1,2])})),u,{toLocaleString:Ie}),en[u]=T?v:k,t||T||l(b,se,k)}}else e.exports=function(){}});qn("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}}),pt(pt.P,"Array",{fill:Vt}),Fn("fill");var Jn=function(e){return function(t,n){var r,o,d=Ot(t)+"",s=At(n),i=d.length;return 0>s||s>=i?e?"":void 0:(r=d.charCodeAt(s),55296>r||56319<r||s+1===i||56320>(o=d.charCodeAt(s+1))||57343<o?e?d.charAt(s):r:e?d.slice(s,s+2):(r-55296<<10)+(o-56320)+65536)}},Qn=Jn(!0),at=function(e,t,n){return t+(n?Qn(e,t).length:1)},er=RegExp.prototype.exec,tr=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==Qt(e))throw new TypeError("RegExp#exec called on incompatible receiver");return er.call(e,t)},nr=function(){var e=Ve(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},rr=RegExp.prototype.exec,ar=Be.replace,sr=rr,ir="lastIndex",or=function(){var e=/a/,t=/b*/g;return rr.call(e,"a"),rr.call(t,"a"),0!==e[ir]||0!==t[ir]}(),lr=/()??/.exec("")[1]!==void 0;(or||lr)&&(sr=function(e){var t,n,r,a,s=this;return lr&&(n=new RegExp("^"+s.source+"$(?!\\s)",nr.call(s))),or&&(t=s[ir]),r=rr.call(s,e),or&&r&&(s[ir]=s.global?r.index+r[0].length:t),lr&&r&&1<r.length&&ar.call(r[0],n,function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),r});var dr=sr;pt({target:"RegExp",proto:!0,forced:dr!==/./.exec},{exec:dr});var cr=jt("species"),gr=!He(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),hr=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),ur=function(e,t,n){var r=jt(e),a=!He(function(){var t={};return t[r]=function(){return 7},7!=""[e](t)}),s=a?!He(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[cr]=function(){return n}),n[r](""),!t}):void 0;if(!a||!s||"replace"===e&&!gr||"split"===e&&!hr){var i=/./[r],o=n(Ot,r,""[e],function(e,t,n,r,s){return t.exec===dr?a&&!s?{done:!0,value:i.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),l=o[0],d=o[1];lt(String.prototype,e,l),Qe(RegExp.prototype,r,2==t?function(e,t){return d.call(e,this,t)}:function(e){return d.call(e,this)})}},pr=function(e){return e===void 0?e:e+""};ur("replace",2,function(e,t,n,r){function a(e,t,r,a,s,i){var o=r+e.length,l=a.length,d=/\$([$&`']|\d\d?)/g;return void 0!==s&&(s=wt(s),d=/\$([$&`']|\d\d?|<[^>]*>)/g),n.call(i,d,function(i,d){var c;switch(d.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(o);case"<":c=s[d.slice(1,-1)];break;default:var g=+d;if(0==g)return i;if(g>l){var n=Le(g/10);return 0===n?i:n<=l?void 0===a[n-1]?d.charAt(1):a[n-1]+d.charAt(1):i}c=a[g-1];}return void 0===c?"":c})}return[function(r,a){var s=e(this),i=r==null?void 0:r[t];return i===void 0?n.call(s+"",r,a):i.call(r,s,a)},function(e,t){var s=r(n,e,this,t);if(s.done)return s.value;var o=Ve(e),l=this+"",d="function"==typeof t;d||(t=t+"");var c=o.global;if(c){var g=o.unicode;o.lastIndex=0}for(var h,u=[];(h=tr(o,l),null!==h)&&!(u.push(h),!c);){var p=h[0]+"";""==p&&(o.lastIndex=at(l,It(o.lastIndex),g))}for(var f="",y=0,m=0;m<u.length;m++){h=u[m];for(var E=h[0]+"",S=De(Ce(At(h.index),l.length),0),x=[],P=1;P<h.length;P++)x.push(pr(h[P]));var b=h.groups;if(d){var _=[E].concat(x,S,l);b!==void 0&&_.push(b);var A=t.apply(void 0,_)+""}else A=a(E,l,S,x,b,t);S>=y&&(f+=l.slice(y,S)+A,y=S+E.length)}return f+l.slice(y)}]});var fr=function(t,n,e,r){try{return r?n(Ve(e)[0],e[1]):n(e)}catch(n){var a=t["return"];throw void 0!==a&&Ve(a.call(t)),n}},yr=t(function(e){var t={},n={},r=e.exports=function(e,r,a,s,i){var o,l,d,c,g=i?function(){return e}:En(e),h=ct(a,s,r?2:1),u=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(rn(g)){for(o=It(e.length);o>u;u++)if(c=r?h(Ve(l=e[u])[0],l[1]):h(e[u]),c===t||c===n)return c;}else for(d=g.call(e);!(l=d.next()).done;)if(c=fr(d,h,l.value,r),c===t||c===n)return c};r.BREAK=t,r.RETURN=n}),mr=t(function(e){var t=st("meta"),n=f.f,r=0,a=Object.isExtensible||function(){return!0},s=!He(function(){return a(Object.preventExtensions({}))}),i=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},o=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!we(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!tt(e,t)){if(!a(e))return"F";if(!n)return"E";i(e)}return e[t].i},getWeak:function(e,n){if(!tt(e,t)){if(!a(e))return!0;if(!n)return!1;i(e)}return e[t].w},onFreeze:function(e){return s&&o.NEED&&a(e)&&!tt(e,t)&&i(e),e}}}),Er=mr.KEY,Sr=mr.NEED,xr=mr.fastKey,Pr=mr.getWeak,br=mr.onFreeze,_r=function(e,t){if(!we(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},Ar=f.f,Ir=mr.fastKey,vr=Ne?"_s":"size",Tr=function(e,t){var n,r=Ir(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n},Fr={getConstructor:function(e,t,n,r){var a=e(function(e,s){_t(e,a,t,"_i"),e._t=t,e._i=un(null),e._f=void 0,e._l=void 0,e[vr]=0,null!=s&&yr(s,n,e[r],e)});return bt(a.prototype,{clear:function(){for(var e=_r(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[vr]=0},delete:function(e){var n=_r(this,t),r=Tr(n,e);if(r){var a=r.n,s=r.p;delete n._i[r.i],r.r=!0,s&&(s.n=a),a&&(a.p=s),n._f==r&&(n._f=a),n._l==r&&(n._l=s),n[vr]--}return!!r},forEach:function(e){_r(this,t);for(var n,r=ct(e,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!Tr(_r(this,t),e)}}),Ne&&Ar(a.prototype,"size",{get:function(){return _r(this,t)[vr]}}),a},def:function(e,t,n){var r,a,s=Tr(e,t);return s?s.v=n:(e._l=s={i:a=Ir(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},!e._f&&(e._f=s),r&&(r.n=s),e[vr]++,"F"!==a&&(e._i[a]=s)),e},getEntry:Tr,setStrong:function(e,t,n){Hn(e,t,function(e,n){this._t=_r(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?kn(0,n.k):"values"==t?kn(0,n.v):kn(0,[n.k,n.v]):(e._t=void 0,kn(1))},n?"entries":"values",!n,!0),Vn(t)}},kr=function(e,t){if(Ve(e),!we(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},Or={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=ct(Function.call,Zn.f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(e,r){return kr(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:kr},Br=Or.set,Lr=function(e,t,n){var r,a=t.constructor;return a!==n&&"function"==typeof a&&(r=a.prototype)!==n.prototype&&we(r)&&Br&&Br(e,r),e},Rr=function(e,t,n,r,a,s){var i=ze[e],o=i,l=a?"set":"add",d=o&&o.prototype,c={},g=function(e){var t=d[e];lt(d,e,"delete"==e?function(e){return(!s||we(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return(!s||we(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return s&&!we(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"!=typeof o||!(s||d.forEach&&!He(function(){new o().entries().next()})))o=r.getConstructor(t,e,a,l),bt(o.prototype,n),mr.NEED=!0;else{var h=new o,u=h[l](s?{}:-0,1)!=h,p=He(function(){h.has(1)}),f=$n(function(e){new o(e)}),y=!s&&He(function(){for(var e=new o,t=5;t--;)e[l](t,t);return!e.has(-0)});f||(o=t(function(t,n){_t(t,o,e);var r=Lr(new i,t,o);return null!=n&&yr(n,a,r[l],r),r}),o.prototype=d,d.constructor=o),(p||y)&&(g("delete"),g("has"),a&&g("get")),(y||u)&&g(l),s&&d.clear&&delete d.clear}return Kt(o,e),c[e]=o,pt(pt.G+pt.W+pt.F*(o!=i),c),s||r.setStrong(o,e,a),o},Dr="Set",Mr=Rr(Dr,function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{add:function(e){return Fr.def(_r(this,Dr),e=0===e?0:e,e)}},Fr);ur("match",1,function(e,t,r,a){return[function(n){var r=e(this),a=n==null?void 0:n[t];return a===void 0?new RegExp(n)[t](r+""):a.call(n,r)},function(e){var t=a(r,e,this);if(t.done)return t.value;var s=Ve(e),i=this+"";if(!s.global)return tr(s,i);var o=s.unicode;s.lastIndex=0;for(var l,d=[],c=0;null!==(l=tr(s,i));){var g=l[0]+"";d[c]=g,""==g&&(s.lastIndex=at(i,It(s.lastIndex),o)),c++}return 0===c?null:d}]});var Cr=function(e,t,n){t in e?f.f(e,t,Je(0,n)):e[t]=n};pt(pt.S+pt.F*!$n(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,a,s=wt(e),i="function"==typeof this?this:Array,o=arguments.length,l=1<o?arguments[1]:void 0,d=void 0!==l,c=0,g=En(s);if(d&&(l=ct(l,2<o?arguments[2]:void 0,2)),null!=g&&!(i==Array&&rn(g)))for(a=g.call(s),n=new i;!(r=a.next()).done;c++)Cr(n,c,d?fr(a,l,[r.value,c],!0):r.value);else for(t=It(s.length),n=new i(t);t>c;c++)Cr(n,c,d?l(s[c],c):s[c]);return n.length=c,n}});var Hr=[].sort,Nr=[1,2,3];pt(pt.P+pt.F*(He(function(){Nr.sort(void 0)})||!He(function(){Nr.sort(null)})||!function(e,t){return!!e&&He(function(){t?e.call(null,function(){},1):e.call(null)})}(Hr)),"Array",{sort:function(e){return e===void 0?Hr.call(wt(this)):Hr.call(wt(this),dt(e))}});(function(e,t){var n=(Ye.Object||{})[e]||Object[e],r={};r[e]=t(n),pt(pt.S+pt.F*He(function(){n(1)}),"Object",r)})("keys",function(){return function(e){return an(wt(e))}});var Ur={f:jt},zr=f.f,Yr=function(e){var t=Ye.Symbol||(Ye.Symbol=ze.Symbol||{});"_"==e.charAt(0)||e in t||zr(t,e,{value:Ur.f(e)})};Yr("asyncIterator");var $r=Object.getOwnPropertySymbols,wr={f:$r},Vr=function(e){var t=an(e),n=wr.f;if(n)for(var r,a=n(e),s=Wn.f,o=0;a.length>o;)s.call(e,r=a[o++])&&t.push(r);return t},jr=$t.f,Gr={}.toString,Wr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Kr=function(e){try{return jr(e)}catch(t){return Wr.slice()}},Xr={f:function(e){return Wr&&"[object Window]"==Gr.call(e)?Kr(e):jr(Bt(e))}},Zr=mr.KEY,qr=Zn.f,Jr=f.f,Qr=Xr.f,ea=ze.Symbol,ta=ze.JSON,na=ta&&ta.stringify,ra="prototype",aa=jt("_hidden"),sa=jt("toPrimitive"),ia={}.propertyIsEnumerable,oa=it("symbol-registry"),la=it("symbols"),da=it("op-symbols"),ca=Object[ra],ga="function"==typeof ea&&!!wr.f,ha=ze.QObject,ua=!ha||!ha[ra]||!ha[ra].findChild,pa=Ne&&He(function(){return 7!=un(Jr({},"a",{get:function(){return Jr(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=qr(ca,t);r&&delete ca[t],Jr(e,t,n),r&&e!==ca&&Jr(ca,t,r)}:Jr,fa=function(e){var t=la[e]=un(ea[ra]);return t._k=e,t},ya=ga&&"symbol"==typeof ea.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof ea},ma=function(e,t,n){return e===ca&&ma(da,t,n),Ve(e),t=Xe(t,!0),Ve(n),tt(la,t)?(n.enumerable?(tt(e,aa)&&e[aa][t]&&(e[aa][t]=!1),n=un(n,{enumerable:Je(0,!1)})):(!tt(e,aa)&&Jr(e,aa,Je(1,{})),e[aa][t]=!0),pa(e,t,n)):Jr(e,t,n)},Ea=function(e,t){Ve(e);for(var n,r=Vr(t=Bt(t)),a=0,s=r.length;s>a;)ma(e,n=r[a++],t[n]);return e},Sa=function(e){var t=ia.call(this,e=Xe(e,!0));return(this!==ca||!tt(la,e)||tt(da,e))&&(!(t||!tt(this,e)||!tt(la,e)||tt(this,aa)&&this[aa][e])||t)},xa=function(e,t){if(e=Bt(e),t=Xe(t,!0),e!==ca||!tt(la,t)||tt(da,t)){var n=qr(e,t);return n&&tt(la,t)&&!(tt(e,aa)&&e[aa][t])&&(n.enumerable=!0),n}},Pa=function(e){for(var t,n=Qr(Bt(e)),r=[],a=0;n.length>a;)tt(la,t=n[a++])||t==aa||t==Zr||r.push(t);return r},ba=function(e){for(var t,n=e===ca,r=Qr(n?da:Bt(e)),a=[],s=0;r.length>s;)tt(la,t=r[s++])&&(!n||tt(ca,t))&&a.push(la[t]);return a};ga||(ea=function(){if(this instanceof ea)throw TypeError("Symbol is not a constructor!");var e=st(0<arguments.length?arguments[0]:void 0),t=function(n){this===ca&&t.call(da,n),tt(this,aa)&&tt(this[aa],e)&&(this[aa][e]=!1),pa(this,e,Je(1,n))};return Ne&&ua&&pa(ca,e,{configurable:!0,set:t}),fa(e)},lt(ea[ra],"toString",function(){return this._k}),Zn.f=xa,f.f=ma,$t.f=Xr.f=Pa,Wn.f=Sa,wr.f=ba,Ne&&!Ue&&lt(ca,"propertyIsEnumerable",Sa,!0),Ur.f=function(e){return fa(jt(e))}),pt(pt.G+pt.W+pt.F*!ga,{Symbol:ea});for(var _a=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],Aa=0;_a.length>Aa;)jt(_a[Aa++]);for(var Ia=an(jt.store),va=0;Ia.length>va;)Yr(Ia[va++]);pt(pt.S+pt.F*!ga,"Symbol",{for:function(e){return tt(oa,e+="")?oa[e]:oa[e]=ea(e)},keyFor:function(e){if(!ya(e))throw TypeError(e+" is not a symbol!");for(var t in oa)if(oa[t]===e)return t},useSetter:function(){ua=!0},useSimple:function(){ua=!1}}),pt(pt.S+pt.F*!ga,"Object",{create:function(e,t){return t===void 0?un(e):Ea(un(e),t)},defineProperty:ma,defineProperties:Ea,getOwnPropertyDescriptor:xa,getOwnPropertyNames:Pa,getOwnPropertySymbols:ba});var Ta=He(function(){wr.f(1)});pt(pt.S+pt.F*Ta,"Object",{getOwnPropertySymbols:function(e){return wr.f(wt(e))}}),ta&&pt(pt.S+pt.F*(!ga||He(function(){var e=ea();return"[null]"!=na([e])||"{}"!=na({a:e})||"{}"!=na(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(n=t=r[1],(we(t)||void 0!==e)&&!ya(e))return Sn(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ya(t))return t}),r[1]=t,na.apply(ta,r)}}),ea[ra][sa]||Qe(ea[ra],sa,ea[ra].valueOf),Kt(ea,"Symbol"),Kt(Math,"Math",!0),Kt(ze.JSON,"JSON",!0);for(var Fa=jt("iterator"),ka=jt("toStringTag"),Oa=en.Array,Ba={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},La=an(Ba),Ra=0;Ra<La.length;Ra++){var Da,Ma=La[Ra],Ca=Ba[Ma],Ha=ze[Ma],Na=Ha&&Ha.prototype;if(Na&&(Na[Fa]||Qe(Na,Fa,Oa),Na[ka]||Qe(Na,ka,Ma),en[Ma]=Oa,Ca))for(Da in Nn)Na[Da]||lt(Na,Da,Nn[Da],!0)}var Ua=Jn(!0);Hn(String,"String",function(e){this._t=e+"",this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Ua(t,n),this._i+=e.length,{value:e,done:!1})});var za=Rr("Map",function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}},{get:function(e){var t=Fr.getEntry(_r(this,"Map"),e);return t&&t.v},set:function(e,t){return Fr.def(_r(this,"Map"),0===e?0:e,t)}},Fr,!0),Ya="\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF",$a="["+Ya+"]",wa="\u200B\x85",Va=RegExp("^"+$a+$a+"*"),ja=RegExp($a+$a+"*$"),Ga=function(e,t,n){var r={},a=He(function(){return!!Ya[e]()||wa[e]()!=wa}),s=r[e]=a?t(Wa):Ya[e];n&&(r[n]=s),pt(pt.P+pt.F*a,"String",r)},Wa=Ga.trim=function(e,t){return e=Ot(e)+"",1&t&&(e=e.replace(Va,"")),2&t&&(e=e.replace(ja,"")),e},Ka=$t.f,Xa=Zn.f,Za=f.f,qa=Ga.trim,Ja="Number",Qa=ze[Ja],es=Qa,ts=Qa.prototype,ns=Ft(un(ts))==Ja,rs=("trim"in Be),as=function(e){var t=Xe(e,!1);if("string"==typeof t&&2<t.length){t=rs?t.trim():qa(t,3);var n,r,a,s=t.charCodeAt(0);if(43===s||45===s){if(n=t.charCodeAt(2),88===n||120===n)return NaN;}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+t;}for(var o,d=t.slice(2),c=0,g=d.length;c<g;c++)if(o=d.charCodeAt(c),48>o||o>a)return NaN;return parseInt(d,r)}}return+t};if(!Qa(" 0o1")||!Qa("0b1")||Qa("+0x1")){Qa=function(e){var t=1>arguments.length?0:e,n=this;return n instanceof Qa&&(ns?He(function(){ts.valueOf.call(n)}):Ft(n)!=Ja)?Lr(new es(as(t)),n,Qa):as(t)};for(var ss,is=Ne?Ka(es):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),os=0;is.length>os;os++)tt(es,ss=is[os])&&!tt(Qa,ss)&&Za(Qa,ss,Xa(es,ss));Qa.prototype=ts,ts.constructor=Qa,lt(ze,Ja,Qa)}pt(pt.S,"Number",{isInteger:function(e){return!we(e)&&isFinite(e)&&Le(e)===e}}),Ne&&"g"!=/./g.flags&&f.f(RegExp.prototype,"flags",{configurable:!0,get:nr});var ls=/./.toString,ds=function(e){lt(RegExp.prototype,"toString",e,!0)};He(function(){return"/a/b"!=ls.call({source:"a",flags:"b"})})?ds(function(){var e=Ve(this);return"/".concat(e.source,"/","flags"in e?e.flags:!Ne&&e instanceof RegExp?nr.call(e):void 0)}):ls.name!="toString"&&ds(function(){return ls.call(this)});({})[jt("toStringTag")]="z",lt(Object.prototype,"toString",function(){return"[object "+Qt(this)+"]"},!0);var cs=function(e){var t=Ot(this)+"",r="",a=At(e);if(0>a||a==1/0)throw RangeError("Count can't be negative");for(;0<a;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r},gs=function(e,t,n,r){var a=Ot(e)+"",s=a.length,i=void 0===n?" ":n+"",o=It(t);if(o<=s||""==i)return a;var l=o-s,d=cs.call(i,Re(l/i.length));return d.length>l&&(d=d.slice(0,l)),r?d+a:a+d},hs=ze.navigator,us=hs&&hs.userAgent||"",ps=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(us);pt(pt.P+pt.F*ps,"String",{padStart:function(e){return gs(this,e,1<arguments.length?arguments[1]:void 0,!0)}});var fs=/:([0-9A-Fa-f]{8,})([0-9A-Fa-f]{2})(?:\r\n|\r|\n|)/g;Oe=Oe||function(e){return"number"==typeof e&&isFinite(e)&&Le(e)===e};var ys=function(){function e(t){if(r(this,e),this._blocks=new Map,t&&"function"==typeof t[Symbol.iterator]){var a,s=u(t);try{for(s.s();!(a=s.n()).done;){var i=a.value;if(!(i instanceof Array)||2!==i.length)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined");this.set(i[0],i[1])}}catch(e){s.e(e)}finally{s.f()}}else if("object"===n(t))for(var o,l=Object.keys(t),d=0,c=l;d<c.length;d++)o=c[d],this.set(parseInt(o),t[o]);else if(void 0!==t&&null!==t)throw new Error("First parameter to MemoryMap constructor must be an iterable of [addr, bytes] or undefined")}return s(e,[{key:"set",value:function(e,t){if(!Oe(e))throw new Error("Address passed to MemoryMap is not an integer");if(0>e)throw new Error("Address passed to MemoryMap is negative");if(!(t instanceof Uint8Array))throw new Error("Bytes passed to MemoryMap are not an Uint8Array");return this._blocks.set(e,t)}},{key:"get",value:function(e){return this._blocks.get(e)}},{key:"clear",value:function(){return this._blocks.clear()}},{key:"delete",value:function(e){return this._blocks.delete(e)}},{key:"entries",value:function(){return this._blocks.entries()}},{key:"forEach",value:function(e,t){return this._blocks.forEach(e,t)}},{key:"has",value:function(e){return this._blocks.has(e)}},{key:"keys",value:function(){return this._blocks.keys()}},{key:"values",value:function(){return this._blocks.values()}},{key:Symbol.iterator,value:function(){return this._blocks[Symbol.iterator]()}},{key:"join",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1/0,n=Array.from(this.keys()).sort(function(e,t){return e-t}),r=new Map,a=-1,s=-1,o=0,d=n.length;o<d;o++){var l=n[o],c=this.get(n[o]).length;if(s===l&&s-a<t)r.set(a,r.get(a)+c),s+=c;else if(s<=l)r.set(l,c),a=l,s=l+c;else throw new Error("Overlapping data around address 0x"+l.toString(16))}for(var g,h,u=new e,p=-1,f=0,y=n.length;f<y;f++)h=n[f],r.has(h)&&(g=new Uint8Array(r.get(h)),u.set(h,g),p=h),g.set(this.get(h),h-p);return u}},{key:"paginate",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1024,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255;if(0>=t)throw new Error("Page size must be greater than zero");for(var r,a=new e,s=Array.from(this.keys()).sort(function(e,t){return e-t}),o=0,d=s.length;o<d;o++)for(var l=s[o],c=this.get(l),g=c.length,h=l-l%t;h<l+g;h+=t){r=a.get(h),r||(r=new Uint8Array(t),r.fill(n),a.set(h,r));var u=h-l,p=void 0;0>=u?(p=c.subarray(0,Ce(t+u,g)),r.set(p,-u)):(p=c.subarray(u,u+Ce(t,g-u)),r.set(p,0))}return a}},{key:"getUint32",value:function(e,t){for(var n=Array.from(this.keys()),r=0,a=n.length;r<a;r++){var s=n[r],o=this.get(s),l=o.length;if(s<=e&&e+4<=s+l)return new DataView(o.buffer,e-s,4).getUint32(0,t)}}},{key:"asHexString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:16,t=0,n=-65536,r=[];if(0>=e)throw new Error("Size of record must be greater than zero");else if(255<e)throw new Error("Size of record must be less than 256");for(var a=new Uint8Array(6),s=new Uint8Array(4),o=Array.from(this.keys()).sort(function(e,t){return e-t}),d=0,c=o.length;d<c;d++){var l=o[d],g=this.get(l);if(!(g instanceof Uint8Array))throw new Error("Block at offset "+l+" is not an Uint8Array");if(0>l)throw new Error("Block at offset "+l+" has a negative thus invalid address");var h=g.length;if(h){if(l>n+65535&&(n=l-l%65536,t=0,a[0]=2,a[1]=0,a[2]=0,a[3]=4,a[4]=n>>24,a[5]=n>>16,r.push(":"+Array.prototype.map.call(a,m).join("")+m(p(a)))),l<n+t)throw new Error("Block starting at 0x"+l.toString(16)+" overlaps with a previous block.");t=l%65536;var u=0,f=l+h;if(4294967295<f)throw new Error("Data cannot be over 0xFFFFFFFF");for(;n+t<f;){65535<t&&(n+=65536,t=0,a[0]=2,a[1]=0,a[2]=0,a[3]=4,a[4]=n>>24,a[5]=n>>16,r.push(":"+Array.prototype.map.call(a,m).join("")+m(p(a))));for(var E=-1;65536>t&&E;)if(E=Ce(e,f-n-t,65536-t),E){s[0]=E,s[1]=t>>8,s[2]=t,s[3]=0;var S=g.subarray(u,u+E);r.push(":"+Array.prototype.map.call(s,m).join("")+Array.prototype.map.call(S,m).join("")+m(y(s,S))),u+=E,t+=E}}}}return r.push(":00000001FF"),r.join("\n")}},{key:"clone",value:function(){var t,n=new e,r=u(this);try{for(r.s();!(t=r.n()).done;){var a=o(t.value,2),s=a[0],i=a[1];n.set(s,new Uint8Array(i))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"slice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0;if(0>n)throw new Error("Length of the slice cannot be negative");var r,a=new e,s=u(this);try{for(s.s();!(r=s.n()).done;){var i=o(r.value,2),l=i[0],d=i[1],c=d.length;if(l+c>=t&&l<t+n){var g=De(t,l),h=Ce(t+n,l+c),p=h-g,f=g-l;0<p&&a.set(g,d.subarray(f,f+p))}}}catch(e){s.e(e)}finally{s.f()}return a}},{key:"slicePad",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:255;if(0>t)throw new Error("Length of the slice cannot be negative");var r,a=new Uint8Array(t).fill(n),s=u(this);try{for(s.s();!(r=s.n()).done;){var i=o(r.value,2),l=i[0],d=i[1],c=d.length;if(l+c>=e&&l<e+t){var g=De(e,l),h=Ce(e+t,l+c),p=h-g,f=g-l;0<p&&a.set(d.subarray(f,f+p),g-e)}}}catch(e){s.e(e)}finally{s.f()}return a}},{key:"contains",value:function(e){var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),a=r[0],s=r[1],l=s.length,d=this.slice(a,l).join().get(a);if(!d||d.length!==l)return!1;for(var c in s)if(s[c]!==d[c])return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"size",get:function(){return this._blocks.size}}],[{key:"fromHex",value:function(t){var n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,a=new e,s=0,i=0,l=0;for(fs.lastIndex=0;null!==(n=fs.exec(t));){if(i++,s!==n.index)throw new Error("Malformed hex file: Could not parse between characters "+s+" and "+n.index+" (\""+t.substring(s,Ce(n.index,s+16)).trim()+"\")");s=fs.lastIndex;var d=n,c=o(d,3),g=c[1],h=c[2],u=new Uint8Array(g.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)})),f=u[0];if(f+4!==u.length)throw new Error("Mismatched record length at record "+i+" ("+n[0].trim()+"), expected "+f+" data bytes but actual length is "+(u.length-4));var y=p(u);if(parseInt(h,16)!==y)throw new Error("Checksum failed at record "+i+" ("+n[0].trim()+"), should be "+y.toString(16));var E=(u[1]<<8)+u[2],S=u[3],x=u.subarray(4);if(0===S){if(a.has(l+E))throw new Error("Duplicated data at record "+i+" ("+n[0].trim()+")");if(65536<E+x.length)throw new Error("Data at record "+i+" ("+n[0].trim()+") wraps over 0xFFFF. This would trigger ambiguous behaviour. Please restructure your data so that for every record the data offset plus the data length do not exceed 0xFFFF.");a.set(l+E,x)}else{if(0!==E)throw new Error("Record "+i+" ("+n[0].trim()+") must have 0000 as data offset.");switch(S){case 1:if(s!==t.length)throw new Error("There is data after an EOF record at record "+i);return a.join(r);case 2:l=(x[0]<<8)+x[1]<<4;break;case 3:break;case 4:l=(x[0]<<8)+x[1]<<16;break;case 5:break;default:throw new Error("Invalid record type 0x"+m(S)+" at record "+i+" (should be between 0x00 and 0x05)");}}}if(i)throw new Error("No EOF record at end of file");else throw new Error("Malformed .hex file, could not parse any registers")}},{key:"overlapMemoryMaps",value:function(e){var t,n=new Set,r=u(e);try{for(r.s();!(t=r.n()).done;){var a,s=o(t.value,2),d=s[1],c=u(d);try{for(c.s();!(a=c.n()).done;){var g=o(a.value,2),h=g[0],p=g[1];n.add(h),n.add(h+p.length)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){r.e(e)}finally{r.f()}for(var f=Array.from(n.values()).sort(function(e,t){return e-t}),y=new Map,m=function(t){var n,r=f[t],a=f[t+1],s=[],i=u(e);try{for(i.s();!(n=i.n()).done;){var l=o(n.value,2),d=l[0],c=l[1],g=Array.from(c.keys()).reduce(function(e,t){return t>r?e:De(e,t)},-1);if(-1!==g){var h=c.get(g),p=r-g;p<h.length&&s.push([d,h.subarray(p,a-g)])}}}catch(e){i.e(e)}finally{i.f()}s.length&&y.set(r,s)},E=0,S=f.length-1;E<S;E++)m(E);return y}},{key:"flattenOverlaps",value:function(t){return new e(Array.from(t.entries()).map(function(e){var t=o(e,2),n=t[0],r=t[1];return[n,r[r.length-1][1]]}))}},{key:"fromPaddedUint8Array",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:255,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:64;if(!(t instanceof Uint8Array))throw new Error("Bytes passed to fromPaddedUint8Array are not an Uint8Array");for(var a,s=new e,i=0,o=-1,d=0,c=!1,g=t.length,l=0;l<g;l++)a=t[l],a===n?(i++,i>=r&&(-1!==o&&s.set(d,t.subarray(d,o+1)),c=!0)):(c&&(c=!1,d=l),o=l,i=0);return c||-1===o||s.set(d,t.subarray(d,g)),s}}]),e}(),ms=t(function(e){function t(){}function n(){}(function(){var s=String.fromCharCode;function e(e,t){t=t||1/0;for(var n,r=e.length,a=null,s=[],o=0;o<r;o++){if(n=e.charCodeAt(o),!(55295<n&&57344>n))a&&(-1<(t-=3)&&s.push(239,191,189),a=null);else if(a){if(56320>n){-1<(t-=3)&&s.push(239,191,189),a=n;continue}else n=65536|(a-55296<<10|n-56320),a=null;}else if(56319<n){-1<(t-=3)&&s.push(239,191,189);continue}else if(o+1===r){-1<(t-=3)&&s.push(239,191,189);continue}else{a=n;continue}if(128>n){if(0>(t-=1))break;s.push(n)}else if(2048>n){if(0>(t-=2))break;s.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;s.push(224|n>>12,128|63&n>>6,128|63&n)}else if(2097152>n){if(0>(t-=4))break;s.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}else throw new Error("Invalid code point")}return s}function r(e,t,n){var r="",o="";n=Ce(e.length,n||1/0),t=t||0;for(var l=t;l<n;l++)127>=e[l]?(r+=a(o)+s(e[l]),o=""):o+="%"+e[l].toString(16);return r+a(o)}function a(e){try{return decodeURIComponent(e)}catch(e){return s(65533)}}t.prototype.encode=function(t){var n;return n="undefined"==typeof Uint8Array?e(t):new Uint8Array(e(t)),n},n.prototype.decode=function(e){return r(e,0,e.length)}})(),e&&(e.exports.TextDecoderLite=n,e.exports.TextEncoderLite=t)}),Es=ms.TextDecoderLite,Ss=ms.TextEncoderLite,xs=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},Ps=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};(function(e){e[e.StartAdd=253952]="StartAdd",e[e.Length=8192]="Length",e[e.EndAdd=262144]="EndAdd"})(e.AppendedBlock||(e.AppendedBlock={}));var bs=Wn.f,_s=function(e){return function(t){for(var n,r=Bt(t),a=an(r),s=a.length,o=0,l=[];s>o;)n=a[o++],(!Ne||bs.call(r,n))&&l.push(e?[n,r[n]]:r[n]);return l}},As=_s(!0);pt(pt.S,"Object",{entries:function(e){return As(e)}});var Is=_s(!1);pt(pt.S,"Object",{values:function(e){return Is(e)}});var vs=jt("match"),Ts=function(e){var t;return we(e)&&((t=e[vs])===void 0?"RegExp"==Ft(e):!!t)},Fs=function(e,t,n){if(Ts(t))throw TypeError("String#"+n+" doesn't accept regex!");return Ot(e)+""},ks=jt("match"),Os=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[ks]=!1,!"/./"[e](t)}catch(e){}}return!0},Bs="includes";pt(pt.P+pt.F*Os(Bs),"String",{includes:function(e){return!!~Fs(this,e,Bs).indexOf(e,1<arguments.length?arguments[1]:void 0)}});var Ls="".endsWith;pt(pt.P+pt.F*Os("endsWith"),"String",{endsWith:function(e){var t=Fs(this,e,"endsWith"),n=1<arguments.length?arguments[1]:void 0,r=It(t.length),a=n===void 0?r:Ce(It(n),r),s=e+"";return Ls.call(t,s,a)}});var Rs=Rt(!0);pt(pt.P,"Array",{includes:function(e){return Rs(this,e,1<arguments.length?arguments[1]:void 0)}}),Fn("includes");var Ds=[].push,Ms="split",Cs="length",Hs="lastIndex",Ns=4294967295,Us=!He(function(){RegExp(Ns,"y")});ur("split",2,function(e,t,n,r){var a;return a="c"=="abbc"[Ms](/(b)*/)[1]||4!="test"[Ms](/(?:)/,-1)[Cs]||2!="ab"[Ms](/(?:ab)*/)[Cs]||4!="."[Ms](/(.?)(.?)/)[Cs]||1<"."[Ms](/()()/)[Cs]||""[Ms](/.?/)[Cs]?function(e,t){var r=this+"";if(void 0===e&&0===t)return[];if(!Ts(e))return n.call(r,e,t);for(var a,s,i,o=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,c=void 0===t?Ns:t>>>0,g=new RegExp(e.source,l+"g");(a=dr.call(g,r))&&(s=g[Hs],!(s>d&&(o.push(r.slice(d,a.index)),1<a[Cs]&&a.index<r[Cs]&&Ds.apply(o,a.slice(1)),i=a[0][Cs],d=s,o[Cs]>=c)));)g[Hs]===a.index&&g[Hs]++;return d===r[Cs]?(i||!g.test(""))&&o.push(""):o.push(r.slice(d)),o[Cs]>c?o.slice(0,c):o}:"0"[Ms](void 0,0)[Cs]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var s=e(this),i=null==n?void 0:n[t];return void 0===i?a.call(s+"",n,r):i.call(n,s,r)},function(t,s){var o=r(a,t,this,s,a!==n);if(o.done)return o.value;var l=Ve(t),d=this+"",c=In(l,RegExp),g=l.unicode,h=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(Us?"y":"g"),u=new c(Us?l:"^(?:"+l.source+")",h),f=void 0===s?Ns:s>>>0;if(0===f)return[];if(0===d.length)return null===tr(u,d)?[d]:[];for(var y=0,m=0,E=[];m<d.length;){u.lastIndex=Us?m:0;var S,x=tr(u,Us?d:d.slice(m));if(null===x||(S=Ce(It(u.lastIndex+(Us?0:m)),d.length))===y)m=at(d,m,g);else{if(E.push(d.slice(y,m)),E.length===f)return E;for(var P=1;P<=x.length-1;P++)if(E.push(x[P]),E.length===f)return E;m=y=S}}return E.push(d.slice(y)),E}]}),pt(pt.S,"Number",{isNaN:function(e){return e!=e}});var zs;(function(e){e[e.Data=0]="Data",e[e.EndOfFile=1]="EndOfFile",e[e.ExtendedSegmentAddress=2]="ExtendedSegmentAddress",e[e.StartSegmentAddress=3]="StartSegmentAddress",e[e.ExtendedLinearAddress=4]="ExtendedLinearAddress",e[e.StartLinearAddress=5]="StartLinearAddress",e[e.BlockStart=10]="BlockStart",e[e.BlockEnd=11]="BlockEnd",e[e.PaddedData=12]="PaddedData",e[e.CustomData=13]="CustomData",e[e.OtherData=14]="OtherData"})(zs||(zs={}));var Ys,$s=":".length,ws=2,Vs=4,js=2,Gs=0+$s+ws+Vs+js,Ws=0,Ks=$s+ws+Vs+js+Ws+2,Xs=Ks-Ws+64,Zs=[39168,39169];(function(e){e[e.V1=39168]="V1",e[e.V2=39171]="V2"})(Ys||(Ys={})),qn("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}});var qs;(function(e){e[e.softDevice=1]="softDevice",e[e.microPython=2]="microPython",e[e.fs=3]="fs"})(qs||(qs={}));var Js;(function(e){e[e.empty=0]="empty",e[e.data=1]="data",e[e.pointer=2]="pointer"})(Js||(Js={}));var Qs;(function(e){e[e.magic2=4]="magic2",e[e.pageSizeLog2=e.magic2+2]="pageSizeLog2",e[e.regionCount=e.pageSizeLog2+2]="regionCount",e[e.tableLength=e.regionCount+2]="tableLength",e[e.version=e.tableLength+2]="version",e[e.magic1=e.version+4]="magic1"})(Qs||(Qs={}));var ei;(function(e){e[e.hashData=8]="hashData",e[e.lengthBytes=e.hashData+4]="lengthBytes",e[e.startPage=e.lengthBytes+2]="startPage",e[e.hashType=e.startPage+1]="hashType",e[e.id=e.hashType+1]="id"})(ei||(ei={}));var ti,ni=ei.id,ri=[{deviceVersion:"V1",magicHeader:401518716,flashSize:262144,fsEnd:262144},{deviceVersion:"V2",magicHeader:1206825084,flashSize:524288,fsEnd:471040}];(function(e){e[e.MagicValue=268439552+128+64]="MagicValue",e[e.EndMarker=e.MagicValue+4]="EndMarker",e[e.PageSize=e.EndMarker+4]="PageSize",e[e.StartPage=e.PageSize+4]="StartPage",e[e.PagesUsed=e.StartPage+2]="PagesUsed",e[e.Delimiter=e.PagesUsed+2]="Delimiter",e[e.VersionLocation=e.Delimiter+4]="VersionLocation",e[e.RegionsTerminator=e.VersionLocation+4]="RegionsTerminator",e[e.End=e.RegionsTerminator+4]="End"})(ti||(ti={}));var ai=1,si=128-ai-1,ii=120,oi=function(){function e(e,t){if(this._filename=e,this._filenameBytes=E(e),this._filenameBytes.length>ii)throw new Error("File name \""+e+"\" is too long "+("(max "+ii+" characters)."));this._dataBytes=t;var n=this._generateFileHeaderBytes();this._fsDataBytes=new Uint8Array(n.length+this._dataBytes.length+1),this._fsDataBytes.set(n,0),this._fsDataBytes.set(this._dataBytes,n.length),this._fsDataBytes[this._fsDataBytes.length-1]=255}return e.prototype.getFsChunks=function(e){var t=[],n=0,r=0,a=new Uint8Array(128).fill(255);a[0]=254;for(var s=Ce(this._fsDataBytes.length,si),o=0;o<s;o++,r++)a[ai+o]=this._fsDataBytes[r];for(t.push(a);r<this._fsDataBytes.length;){if(n++,n>=e.length)throw new Error("Not enough space for the "+this._filename+" file.");var l=t[t.length-1];l[127]=e[n],a=new Uint8Array(128).fill(255),a[0]=e[n-1],s=Ce(this._fsDataBytes.length-r,si);for(var o=0;o<s;o++,r++)a[ai+o]=this._fsDataBytes[r];t.push(a)}return t},e.prototype.getFsBytes=function(e){for(var t=this.getFsChunks(e),n=128*t.length,r=new Uint8Array(n),a=0;a<t.length;a++)r.set(t[a],128*a);return r},e.prototype.getFsFileSize=function(){var e=Re(this._fsDataBytes.length/si);return 128*e},e.prototype._generateFileHeaderBytes=function(){var e=1+1+this._filenameBytes.length,t=(e+this._dataBytes.length)%si,n=e-this._filenameBytes.length,r=new Uint8Array(e);r[0]=t,r[1]=this._filenameBytes.length;for(var a=n;a<e;++a)r[a]=this._filenameBytes[a-n];return r},e}(),li=function(){function e(e,t){if(!e)throw new Error("File was not provided a valid filename.");if(!t)throw new Error("File "+e+" does not have valid content.");if(this.filename=e,"string"==typeof t)this._dataBytes=E(t);else if(t instanceof Uint8Array)this._dataBytes=t;else throw new Error("File data type must be a string or Uint8Array.")}return e.prototype.getText=function(){return S(this._dataBytes)},e.prototype.getBytes=function(){return this._dataBytes},e}(),di=Ys,ci=function(){function e(e,t){var n=this,r=(void 0===t?{}:t).maxFsSize,a=void 0===r?0:r;this._uPyFsBuilderCache=[],this._files={},this._storageSize=0;var s=Array.isArray(e)?e:[{hex:e,boardId:0}],i=1/0;s.forEach(function(e){if(!e.hex)throw new Error("Invalid MicroPython hex.");var t=me(e.hex),r={originalIntelHex:t.originalIntelHex,originalMemMap:t.originalMemMap,uPyEndAddress:t.uPyEndAddress,uPyIntelHex:t.uPyIntelHex,fsSize:t.fsSize,boardId:e.boardId};n._uPyFsBuilderCache.push(r),i=Ce(i,r.fsSize)}),this.setStorageSize(a||i),this._uPyFsBuilderCache.forEach(function(e){var t=Fe(e.originalMemMap);if(Object.keys(t).length)throw new Error("There are files in the MicropythonFsHex constructor hex file input.")})}return e.prototype.create=function(e,t){if(this.exists(e))throw new Error("File already exists.");this.write(e,t)},e.prototype.write=function(e,t){this._files[e]=new li(e,t)},e.prototype.append=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");throw new Error("Append operation not yet implemented.")},e.prototype.read=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");return this._files[e].getText()},e.prototype.readBytes=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");return this._files[e].getBytes()},e.prototype.remove=function(e){if(!e)throw new Error("Invalid filename.");if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");delete this._files[e]},e.prototype.exists=function(e){return this._files.hasOwnProperty(e)},e.prototype.size=function(e){if(!e)throw new Error("Invalid filename: "+e);if(!this.exists(e))throw new Error("File \""+e+"\" does not exist.");return Ae(this._files[e].filename,this._files[e].getBytes())},e.prototype.ls=function(){var e=[];return Object.values(this._files).forEach(function(t){return e.push(t.filename)}),e},e.prototype.setStorageSize=function(e){var t=1/0;if(this._uPyFsBuilderCache.forEach(function(e){t=Ce(t,e.fsSize)}),e>t)throw new Error("Storage size limit provided is larger than size available in the MicroPython hex.");this._storageSize=e},e.prototype.getStorageSize=function(){return this._storageSize},e.prototype.getStorageUsed=function(){var e=this;return Object.values(this._files).reduce(function(t,n){return t+e.size(n.filename)},0)},e.prototype.getStorageRemaining=function(){return this.getStorageSize()-this.getStorageUsed()},e.prototype.importFilesFromIntelHex=function(e,t){var n=this,r=void 0===t?{}:t,a=r.overwrite,s=r.formatFirst,i=Fe(e);if(!Object.keys(i).length)throw new Error("Intel Hex does not have any files to import");void 0!==s&&s&&(this._files={});var o=[];if(Object.keys(i).forEach(function(e){!(void 0!==a&&a)&&n.exists(e)?o.push(e):n.write(e,i[e])}),o.length)throw new Error("Files \"\" from hex already exists.");return Object.keys(i)},e.prototype.importFilesFromUniversalHex=function(e,t){var n=this,r=void 0===t?{}:t,a=r.overwrite,s=r.formatFirst;if(!K(e))throw new Error("Universal Hex provided is invalid.");var i=q(e),o=[];i.forEach(function(e){var t=Fe(e.hex);if(!Object.keys(t).length)throw new Error("Hex with ID "+e.boardId+" from Universal Hex does not have any files to import");o.push(t)}),o.forEach(function(e){for(var t=o.filter(function(t){return t!==e}),n=function(e,n){t.forEach(function(t){if(!t.hasOwnProperty(e)||!Ps(t[e],n))throw new Error("Mismatch in the different Hexes inside the Universal Hex")})},r=0,a=Object.entries(e);r<a.length;r++){var s=a[r],i=s[0],l=s[1];n(i,l)}});var l=o[0];void 0!==s&&s&&(this._files={});var d=[];if(Object.keys(l).forEach(function(e){!(void 0!==a&&a)&&n.exists(e)?d.push(e):n.write(e,l[e])}),d.length)throw new Error("Files \"\" from hex already exists.");return Object.keys(l)},e.prototype.importFilesFromHex=function(e,t){return void 0===t&&(t={}),K(e)?this.importFilesFromUniversalHex(e,t):this.importFilesFromIntelHex(e,t)},e.prototype.getIntelHex=function(e){if(0>this.getStorageRemaining())throw new Error("There is no storage space left.");var t={};if(Object.values(this._files).forEach(function(e){t[e.filename]=e.getBytes()}),void 0===e){if(1===this._uPyFsBuilderCache.length)return Te(this._uPyFsBuilderCache[0],t);throw new Error("The Board ID must be specified if there are multiple MicroPythons.")}for(var n,r=0,a=this._uPyFsBuilderCache;r<a.length;r++)if(n=a[r],n.boardId===e)return Te(n,t);throw new Error("Board ID requested not found.")},e.prototype.getIntelHexBytes=function(e){if(0>this.getStorageRemaining())throw new Error("There is no storage space left.");var t={};if(Object.values(this._files).forEach(function(e){t[e.filename]=e.getBytes()}),void 0===e){if(1===this._uPyFsBuilderCache.length)return ve(this._uPyFsBuilderCache[0].originalMemMap,t,!0);throw new Error("The Board ID must be specified if there are multiple MicroPythons.")}for(var n,r=0,a=this._uPyFsBuilderCache;r<a.length;r++)if(n=a[r],n.boardId===e)return ve(n.originalMemMap,t,!0);throw new Error("Board ID requested not found.")},e.prototype.getUniversalHex=function(){var e=this;if(1===this._uPyFsBuilderCache.length)throw new Error("MicropythonFsHex constructor must have more than one MicroPython Intel Hex to generate a Universal Hex.");var t=[];return this._uPyFsBuilderCache.forEach(function(n){t.push({hex:e.getIntelHex(n.boardId),boardId:n.boardId})}),W(t)},e}();e.MicropythonFsHex=ci,e.addIntelHexAppendedScript=function(t,n){var r=E(n),a=P(r);if(a.length>e.AppendedBlock.Length)throw new RangeError("Too long");var s=x(t),i=ys.fromHex(s);return i.set(e.AppendedBlock.StartAdd,a),i.asHexString()+"\n"},e.cleanseOldHexFormat=x,e.getHexMapDeviceMemInfo=ye,e.getIntelHexAppendedScript=function(t){var n="",r=ys.fromHex(t);if(r.has(e.AppendedBlock.StartAdd)){var a=r.slice(e.AppendedBlock.StartAdd,e.AppendedBlock.Length),s=a.get(e.AppendedBlock.StartAdd);s[0]===77&&s[1]===80&&(n=S(s.slice(4)),n=n.replace(/\0/g,""))}return n},e.getIntelHexDeviceMemInfo=function(e){return ye(ys.fromHex(e))},e.isAppendedScriptPresent=b,e.microbitBoardId=di,Object.defineProperty(e,"__esModule",{value:!0})});

