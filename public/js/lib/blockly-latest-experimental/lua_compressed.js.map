{"version":3,"sources":["generators/lua/lists.ts","generators/lua/logic.ts","generators/lua/loops.ts","generators/lua/math.ts","generators/lua/procedures.ts","generators/lua/text.ts","generators/lua/variables.ts","generators/lua/lua_generator.ts","generators/lua/variables_dynamic.ts","generators/lua.ts"],"names":["lists_create_empty","block","generator","Order","HIGH","lists_create_with","elements","Array","itemCount_","i","valueToCode","NONE","join","lists_repeat","functionName","provideFunction_","FUNCTION_NAME_PLACEHOLDER_","element","repeatCount","lists_length","UNARY","lists_isEmpty","RELATIONAL","lists_indexOf","item","list","getFieldValue","lists_getIndex","mode","where","match","at","atOrder","ADDITIVE","getListIndex","code","listVar","nameDB_","getDistinctName","NameType","VARIABLE","toLowerCase","lists_setIndex","value","lists_getSublist","where1","where2","at1","at2","at1Param","at2Param","lists_sort","direction","type","lists_split","input","delimiter","Error","lists_reverse","controls_if","n","STATEMENT_PREFIX","injectId","conditionCode","branchCode","statementToCode","STATEMENT_SUFFIX","prefixLines","INDENT","getInput","logic_compare","operator","OPERATORS","argument0","argument1","logic_operation","order","AND","OR","defaultArgument","logic_negate","logic_boolean","ATOMIC","logic_null","logic_ternary","value_if","value_then","value_else","addContinueLabel","branch","indent","includes","CONTINUE_STATEMENT","controls_repeat_ext","repeats","getField","String","Number","isNumber","parseInt","addLoopTrap","loopVar","controls_whileUntil","until","controls_for","variable0","getVariableName","startVar","endVar","increment","incValue","Math","abs","step","controls_forEach","controls_flow_statements","xfix","loop","getSurroundLoop","suppressPrefixSuffix","math_number","math_arithmetic","tuple","MULTIPLICATIVE","EXPONENTIATION","math_single","arg","math_constant","CONSTANTS","math_number_property","PROPERTIES","dropdownProperty","suffix","inputOrder","outputOrder","numberToCheck","divisor","math_change","varName","math_on_list","provideSum","func","math_modulo","math_constrain","argument2","math_random_int","math_random_float","math_atan2","procedures_defreturn","funcName","getProcedureName","xfix1","loopTrap","INFINITE_LOOP_TRAP","returnValue","xfix2","args","variables","getVars","length","scrub_","definitions_","procedures_callreturn","procedures_callnoreturn","forBlock","procedures_ifreturn","hasReturnValue_","text","quote_","text_join","element0","CONCATENATION","element1","text_append","text_length","text_isEmpty","text_indexOf","substring","text_charAt","start","text_getSubstring","at1Order","at2Order","end","text_changeCase","text_trim","LEFT","RIGHT","BOTH","text_print","text_prompt_ext","msg","text_count","sub","text_replace","from","to","text_reverse","variables_get","variables_set","LuaGenerator","CodeGenerator","constructor","name","isInitialized","key","addReservedWords","init","workspace","reset","Names","RESERVED_WORDS_","setVariableMap","getVariableMap","populateVariables","populateProcedures","finish","definitions","Object","values","scrubNakedValue","line","string","replace","multiline_quote_","split","map","lines","thisOnly","commentCode","outputConnection","targetConnection","comment","getCommentText","wrap","COMMENT_WRAP","inputList","inputTypes","VALUE","childBlock","connection","targetBlock","allNestedComments","nextBlock","nextConnection","nextCode","blockToCode","$jscomp$tmp$exports$module$name","listName","opt_at","controls_ifelse","controls_repeat","math_round","math_trig","procedures_defnoreturn","text_prompt","luaGenerator","generators","lists","logic","loops","math","procedures","variablesDynamic"],"mappings":"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","file":"lua_compressed.js","sourcesContent":["/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for list blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.lists\r\n\r\nimport type {CreateWithBlock} from '../../blocks/lists.js';\r\nimport type {Block} from '../../core/block.js';\r\nimport {NameType} from '../../core/names.js';\r\nimport type {LuaGenerator} from './lua_generator.js';\r\nimport {Order} from './lua_generator.js';\r\n\r\nexport function lists_create_empty(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Create an empty list.\r\n  return ['{}', Order.HIGH];\r\n}\r\n\r\nexport function lists_create_with(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  const createWithBlock = block as CreateWithBlock;\r\n  // Create a list with any number of elements of any type.\r\n  const elements = new Array(createWithBlock.itemCount_);\r\n  for (let i = 0; i < createWithBlock.itemCount_; i++) {\r\n    elements[i] =\r\n      generator.valueToCode(createWithBlock, 'ADD' + i, Order.NONE) || 'nil';\r\n  }\r\n  const code = '{' + elements.join(', ') + '}';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function lists_repeat(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Create a list with one element repeated.\r\n  const functionName = generator.provideFunction_(\r\n    'create_list_repeated',\r\n    `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(item, count)\r\n  local t = {}\r\n  for i = 1, count do\r\n    table.insert(t, item)\r\n  end\r\n  return t\r\nend\r\n  `,\r\n  );\r\n  const element = generator.valueToCode(block, 'ITEM', Order.NONE) || 'nil';\r\n  const repeatCount = generator.valueToCode(block, 'NUM', Order.NONE) || '0';\r\n  const code = functionName + '(' + element + ', ' + repeatCount + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function lists_length(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // String or array length.\r\n  const list = generator.valueToCode(block, 'VALUE', Order.UNARY) || '{}';\r\n  return ['#' + list, Order.UNARY];\r\n}\r\n\r\nexport function lists_isEmpty(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Is the string null or array empty?\r\n  const list = generator.valueToCode(block, 'VALUE', Order.UNARY) || '{}';\r\n  const code = '#' + list + ' == 0';\r\n  return [code, Order.RELATIONAL];\r\n}\r\n\r\nexport function lists_indexOf(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Find an item in the list.\r\n  const item = generator.valueToCode(block, 'FIND', Order.NONE) || \"''\";\r\n  const list = generator.valueToCode(block, 'VALUE', Order.NONE) || '{}';\r\n  let functionName;\r\n  if (block.getFieldValue('END') === 'FIRST') {\r\n    functionName = generator.provideFunction_(\r\n      'first_index',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t, elem)\r\n  for k, v in ipairs(t) do\r\n    if v == elem then\r\n      return k\r\n    end\r\n  end\r\n  return 0\r\nend\r\n`,\r\n    );\r\n  } else {\r\n    functionName = generator.provideFunction_(\r\n      'last_index',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t, elem)\r\n  for i = #t, 1, -1 do\r\n    if t[i] == elem then\r\n      return i\r\n    end\r\n  end\r\n  return 0\r\nend\r\n`,\r\n    );\r\n  }\r\n  const code = functionName + '(' + list + ', ' + item + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\n/**\r\n * Returns an expression calculating the index into a list.\r\n *\r\n * @param listName Name of the list, used to calculate length.\r\n * @param where The method of indexing, selected by dropdown in Blockly\r\n * @param opt_at The optional offset when indexing from start/end.\r\n * @returns Index expression.\r\n */\r\nconst getListIndex = function (\r\n  listName: string,\r\n  where: string,\r\n  opt_at: string,\r\n): string {\r\n  if (where === 'FIRST') {\r\n    return '1';\r\n  } else if (where === 'FROM_END') {\r\n    return '#' + listName + ' + 1 - ' + opt_at;\r\n  } else if (where === 'LAST') {\r\n    return '#' + listName;\r\n  } else if (where === 'RANDOM') {\r\n    return 'math.random(#' + listName + ')';\r\n  } else {\r\n    return opt_at;\r\n  }\r\n};\r\n\r\nexport function lists_getIndex(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] | string {\r\n  // Get element at index.\r\n  // Note: Until January 2013 this block did not have MODE or WHERE inputs.\r\n  const mode = block.getFieldValue('MODE') || 'GET';\r\n  const where = block.getFieldValue('WHERE') || 'FROM_START';\r\n  const list = generator.valueToCode(block, 'VALUE', Order.HIGH) || '({})';\r\n\r\n  // If `list` would be evaluated more than once (which is the case for LAST,\r\n  // FROM_END, and RANDOM) and is non-trivial, make sure to access it only once.\r\n  if (\r\n    (where === 'LAST' || where === 'FROM_END' || where === 'RANDOM') &&\r\n    !list.match(/^\\w+$/)\r\n  ) {\r\n    // `list` is an expression, so we may not evaluate it more than once.\r\n    if (mode === 'REMOVE') {\r\n      // We can use multiple statements.\r\n      const atOrder = where === 'FROM_END' ? Order.ADDITIVE : Order.NONE;\r\n      let at = generator.valueToCode(block, 'AT', atOrder) || '1';\r\n      const listVar = generator.nameDB_!.getDistinctName(\r\n        'tmp_list',\r\n        NameType.VARIABLE,\r\n      );\r\n      at = getListIndex(listVar, where, at);\r\n      const code =\r\n        listVar +\r\n        ' = ' +\r\n        list +\r\n        '\\n' +\r\n        'table.remove(' +\r\n        listVar +\r\n        ', ' +\r\n        at +\r\n        ')\\n';\r\n      return code;\r\n    } else {\r\n      // We need to create a procedure to avoid reevaluating values.\r\n      const at = generator.valueToCode(block, 'AT', Order.NONE) || '1';\r\n      let functionName;\r\n      if (mode === 'GET') {\r\n        functionName = generator.provideFunction_(\r\n          'list_get_' + where.toLowerCase(),\r\n          [\r\n            'function ' +\r\n              generator.FUNCTION_NAME_PLACEHOLDER_ +\r\n              '(t' +\r\n              // The value for 'FROM_END' and'FROM_START' depends on `at` so\r\n              // we add it as a parameter.\r\n              (where === 'FROM_END' || where === 'FROM_START' ? ', at)' : ')'),\r\n            '  return t[' + getListIndex('t', where, 'at') + ']',\r\n            'end',\r\n          ],\r\n        );\r\n      } else {\r\n        // `mode` === 'GET_REMOVE'\r\n        functionName = generator.provideFunction_(\r\n          'list_remove_' + where.toLowerCase(),\r\n          [\r\n            'function ' +\r\n              generator.FUNCTION_NAME_PLACEHOLDER_ +\r\n              '(t' +\r\n              // The value for 'FROM_END' and'FROM_START' depends on `at` so\r\n              // we add it as a parameter.\r\n              (where === 'FROM_END' || where === 'FROM_START' ? ', at)' : ')'),\r\n            '  return table.remove(t, ' + getListIndex('t', where, 'at') + ')',\r\n            'end',\r\n          ],\r\n        );\r\n      }\r\n      const code =\r\n        functionName +\r\n        '(' +\r\n        list +\r\n        // The value for 'FROM_END' and 'FROM_START' depends on `at` so we\r\n        // pass it.\r\n        (where === 'FROM_END' || where === 'FROM_START' ? ', ' + at : '') +\r\n        ')';\r\n      return [code, Order.HIGH];\r\n    }\r\n  } else {\r\n    // Either `list` is a simple variable, or we only need to refer to `list`\r\n    // once.\r\n    const atOrder =\r\n      mode === 'GET' && where === 'FROM_END' ? Order.ADDITIVE : Order.NONE;\r\n    let at = generator.valueToCode(block, 'AT', atOrder) || '1';\r\n    at = getListIndex(list, where, at);\r\n    if (mode === 'GET') {\r\n      const code = list + '[' + at + ']';\r\n      return [code, Order.HIGH];\r\n    } else {\r\n      const code = 'table.remove(' + list + ', ' + at + ')';\r\n      if (mode === 'GET_REMOVE') {\r\n        return [code, Order.HIGH];\r\n      } else {\r\n        // `mode` === 'REMOVE'\r\n        return code + '\\n';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function lists_setIndex(block: Block, generator: LuaGenerator): string {\r\n  // Set element at index.\r\n  // Note: Until February 2013 this block did not have MODE or WHERE inputs.\r\n  let list = generator.valueToCode(block, 'LIST', Order.HIGH) || '{}';\r\n  const mode = block.getFieldValue('MODE') || 'SET';\r\n  const where = block.getFieldValue('WHERE') || 'FROM_START';\r\n  const at = generator.valueToCode(block, 'AT', Order.ADDITIVE) || '1';\r\n  const value = generator.valueToCode(block, 'TO', Order.NONE) || 'Nil';\r\n\r\n  let code = '';\r\n  // If `list` would be evaluated more than once (which is the case for LAST,\r\n  // FROM_END, and RANDOM) and is non-trivial, make sure to access it only once.\r\n  if (\r\n    (where === 'LAST' || where === 'FROM_END' || where === 'RANDOM') &&\r\n    !list.match(/^\\w+$/)\r\n  ) {\r\n    // `list` is an expression, so we may not evaluate it more than once.\r\n    // We can use multiple statements.\r\n    const listVar = generator.nameDB_!.getDistinctName(\r\n      'tmp_list',\r\n      NameType.VARIABLE,\r\n    );\r\n    code = listVar + ' = ' + list + '\\n';\r\n    list = listVar;\r\n  }\r\n  if (mode === 'SET') {\r\n    code += list + '[' + getListIndex(list, where, at) + '] = ' + value;\r\n  } else {\r\n    // `mode` === 'INSERT'\r\n    // LAST is a special case, because we want to insert\r\n    // *after* not *before*, the existing last element.\r\n    code +=\r\n      'table.insert(' +\r\n      list +\r\n      ', ' +\r\n      (getListIndex(list, where, at) + (where === 'LAST' ? ' + 1' : '')) +\r\n      ', ' +\r\n      value +\r\n      ')';\r\n  }\r\n  return code + '\\n';\r\n}\r\n\r\nexport function lists_getSublist(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Get sublist.\r\n  const list = generator.valueToCode(block, 'LIST', Order.NONE) || '{}';\r\n  const where1 = block.getFieldValue('WHERE1');\r\n  const where2 = block.getFieldValue('WHERE2');\r\n  const at1 = generator.valueToCode(block, 'AT1', Order.NONE) || '1';\r\n  const at2 = generator.valueToCode(block, 'AT2', Order.NONE) || '1';\r\n\r\n  // The value for 'FROM_END' and'FROM_START' depends on `at` so\r\n  // we add it as a parameter.\r\n  const at1Param =\r\n    where1 === 'FROM_END' || where1 === 'FROM_START' ? ', at1' : '';\r\n  const at2Param =\r\n    where2 === 'FROM_END' || where2 === 'FROM_START' ? ', at2' : '';\r\n  const functionName = generator.provideFunction_(\r\n    'list_sublist_' + where1.toLowerCase() + '_' + where2.toLowerCase(),\r\n    `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(source${at1Param}${at2Param})\r\n  local t = {}\r\n  local start = ${getListIndex('source', where1, 'at1')}\r\n  local finish = ${getListIndex('source', where2, 'at2')}\r\n  for i = start, finish do\r\n    table.insert(t, source[i])\r\n  end\r\n  return t\r\nend\r\n`,\r\n  );\r\n  const code =\r\n    functionName +\r\n    '(' +\r\n    list +\r\n    // The value for 'FROM_END' and 'FROM_START' depends on `at` so we\r\n    // pass it.\r\n    (where1 === 'FROM_END' || where1 === 'FROM_START' ? ', ' + at1 : '') +\r\n    (where2 === 'FROM_END' || where2 === 'FROM_START' ? ', ' + at2 : '') +\r\n    ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function lists_sort(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Block for sorting a list.\r\n  const list = generator.valueToCode(block, 'LIST', Order.NONE) || '{}';\r\n  const direction = block.getFieldValue('DIRECTION') === '1' ? 1 : -1;\r\n  const type = block.getFieldValue('TYPE');\r\n\r\n  const functionName = generator.provideFunction_(\r\n    'list_sort',\r\n    `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(list, typev, direction)\r\n  local t = {}\r\n  for n,v in pairs(list) do table.insert(t, v) end\r\n  local compareFuncs = {\r\n    NUMERIC = function(a, b)\r\n      return (tonumber(tostring(a)) or 0)\r\n          < (tonumber(tostring(b)) or 0) end,\r\n    TEXT = function(a, b)\r\n      return tostring(a) < tostring(b) end,\r\n    IGNORE_CASE = function(a, b)\r\n      return string.lower(tostring(a)) < string.lower(tostring(b)) end\r\n  }\r\n  local compareTemp = compareFuncs[typev]\r\n  local compare = compareTemp\r\n  if direction == -1\r\n  then compare = function(a, b) return compareTemp(b, a) end\r\n  end\r\n  table.sort(t, compare)\r\n  return t\r\nend\r\n`,\r\n  );\r\n\r\n  const code =\r\n    functionName + '(' + list + ',\"' + type + '\", ' + direction + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function lists_split(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Block for splitting text into a list, or joining a list into text.\r\n  let input = generator.valueToCode(block, 'INPUT', Order.NONE);\r\n  const delimiter = generator.valueToCode(block, 'DELIM', Order.NONE) || \"''\";\r\n  const mode = block.getFieldValue('MODE');\r\n  let functionName;\r\n  if (mode === 'SPLIT') {\r\n    if (!input) {\r\n      input = \"''\";\r\n    }\r\n    functionName = generator.provideFunction_(\r\n      'list_string_split',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(input, delim)\r\n  local t = {}\r\n  local pos = 1\r\n  while true do\r\n    next_delim = string.find(input, delim, pos)\r\n    if next_delim == nil then\r\n      table.insert(t, string.sub(input, pos))\r\n      break\r\n    else\r\n      table.insert(t, string.sub(input, pos, next_delim-1))\r\n      pos = next_delim + #delim\r\n    end\r\n  end\r\n  return t\r\nend\r\n`,\r\n    );\r\n  } else if (mode === 'JOIN') {\r\n    if (!input) {\r\n      input = '{}';\r\n    }\r\n    functionName = 'table.concat';\r\n  } else {\r\n    throw Error('Unknown mode: ' + mode);\r\n  }\r\n  const code = functionName + '(' + input + ', ' + delimiter + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function lists_reverse(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Block for reversing a list.\r\n  const list = generator.valueToCode(block, 'LIST', Order.NONE) || '{}';\r\n  const functionName = generator.provideFunction_(\r\n    'list_reverse',\r\n    `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(input)\r\n  local reversed = {}\r\n  for i = #input, 1, -1 do\r\n    table.insert(reversed, input[i])\r\n  end\r\n  return reversed\r\nend\r\n`,\r\n  );\r\n  const code = functionName + '(' + list + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for logic blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.logic\r\n\r\nimport type {Block} from '../../core/block.js';\r\nimport type {LuaGenerator} from './lua_generator.js';\r\nimport {Order} from './lua_generator.js';\r\n\r\nexport function controls_if(block: Block, generator: LuaGenerator): string {\r\n  // If/elseif/else condition.\r\n  let n = 0;\r\n  let code = '';\r\n  if (generator.STATEMENT_PREFIX) {\r\n    // Automatic prefix insertion is switched off for this block.  Add manually.\r\n    code += generator.injectId(generator.STATEMENT_PREFIX, block);\r\n  }\r\n  do {\r\n    const conditionCode =\r\n      generator.valueToCode(block, 'IF' + n, Order.NONE) || 'false';\r\n    let branchCode = generator.statementToCode(block, 'DO' + n);\r\n    if (generator.STATEMENT_SUFFIX) {\r\n      branchCode =\r\n        generator.prefixLines(\r\n          generator.injectId(generator.STATEMENT_SUFFIX, block),\r\n          generator.INDENT,\r\n        ) + branchCode;\r\n    }\r\n    code +=\r\n      (n > 0 ? 'else' : '') + 'if ' + conditionCode + ' then\\n' + branchCode;\r\n    n++;\r\n  } while (block.getInput('IF' + n));\r\n\r\n  if (block.getInput('ELSE') || generator.STATEMENT_SUFFIX) {\r\n    let branchCode = generator.statementToCode(block, 'ELSE');\r\n    if (generator.STATEMENT_SUFFIX) {\r\n      branchCode =\r\n        generator.prefixLines(\r\n          generator.injectId(generator.STATEMENT_SUFFIX, block),\r\n          generator.INDENT,\r\n        ) + branchCode;\r\n    }\r\n    code += 'else\\n' + branchCode;\r\n  }\r\n  return code + 'end\\n';\r\n}\r\n\r\nexport const controls_ifelse = controls_if;\r\n\r\nexport function logic_compare(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Comparison operator.\r\n  const OPERATORS = {\r\n    'EQ': '==',\r\n    'NEQ': '~=',\r\n    'LT': '<',\r\n    'LTE': '<=',\r\n    'GT': '>',\r\n    'GTE': '>=',\r\n  };\r\n  type OperatorOption = keyof typeof OPERATORS;\r\n  const operator = OPERATORS[block.getFieldValue('OP') as OperatorOption];\r\n  const argument0 = generator.valueToCode(block, 'A', Order.RELATIONAL) || '0';\r\n  const argument1 = generator.valueToCode(block, 'B', Order.RELATIONAL) || '0';\r\n  const code = argument0 + ' ' + operator + ' ' + argument1;\r\n  return [code, Order.RELATIONAL];\r\n}\r\n\r\nexport function logic_operation(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Operations 'and', 'or'.\r\n  const operator = block.getFieldValue('OP') === 'AND' ? 'and' : 'or';\r\n  const order = operator === 'and' ? Order.AND : Order.OR;\r\n  let argument0 = generator.valueToCode(block, 'A', order);\r\n  let argument1 = generator.valueToCode(block, 'B', order);\r\n  if (!argument0 && !argument1) {\r\n    // If there are no arguments, then the return value is false.\r\n    argument0 = 'false';\r\n    argument1 = 'false';\r\n  } else {\r\n    // Single missing arguments have no effect on the return value.\r\n    const defaultArgument = operator === 'and' ? 'true' : 'false';\r\n    if (!argument0) {\r\n      argument0 = defaultArgument;\r\n    }\r\n    if (!argument1) {\r\n      argument1 = defaultArgument;\r\n    }\r\n  }\r\n  const code = argument0 + ' ' + operator + ' ' + argument1;\r\n  return [code, order];\r\n}\r\n\r\nexport function logic_negate(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Negation.\r\n  const argument0 = generator.valueToCode(block, 'BOOL', Order.UNARY) || 'true';\r\n  const code = 'not ' + argument0;\r\n  return [code, Order.UNARY];\r\n}\r\n\r\nexport function logic_boolean(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Boolean values true and false.\r\n  const code = block.getFieldValue('BOOL') === 'TRUE' ? 'true' : 'false';\r\n  return [code, Order.ATOMIC];\r\n}\r\n\r\nexport function logic_null(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Null data type.\r\n  return ['nil', Order.ATOMIC];\r\n}\r\n\r\nexport function logic_ternary(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Ternary operator.\r\n  const value_if = generator.valueToCode(block, 'IF', Order.AND) || 'false';\r\n  const value_then = generator.valueToCode(block, 'THEN', Order.AND) || 'nil';\r\n  const value_else = generator.valueToCode(block, 'ELSE', Order.OR) || 'nil';\r\n  const code = value_if + ' and ' + value_then + ' or ' + value_else;\r\n  return [code, Order.OR];\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for loop blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.loops\r\n\r\nimport type {ControlFlowInLoopBlock} from '../../blocks/loops.js';\r\nimport type {Block} from '../../core/block.js';\r\nimport {NameType} from '../../core/names.js';\r\nimport * as stringUtils from '../../core/utils/string.js';\r\nimport type {LuaGenerator} from './lua_generator.js';\r\nimport {Order} from './lua_generator.js';\r\n\r\n/**\r\n * This is the text used to implement a <pre>continue</pre>.\r\n * It is also used to recognise <pre>continue</pre>s in generated code so that\r\n * the appropriate label can be put at the end of the loop body.\r\n */\r\nconst CONTINUE_STATEMENT = 'goto continue\\n';\r\n\r\n/**\r\n * If the loop body contains a \"goto continue\" statement, add a continue label\r\n * to the loop body. Slightly inefficient, as continue labels will be generated\r\n * in all outer loops, but this is safer than duplicating the logic of\r\n * blockToCode.\r\n *\r\n * @param branch Generated code of the loop body\r\n * @param indent Whitespace by which to indent a continue statement.\r\n * @returns Generated label or '' if unnecessary\r\n */\r\nfunction addContinueLabel(branch: string, indent: string): string {\r\n  if (branch.includes(CONTINUE_STATEMENT)) {\r\n    // False positives are possible (e.g. a string literal), but are harmless.\r\n    return branch + indent + '::continue::\\n';\r\n  } else {\r\n    return branch;\r\n  }\r\n}\r\n\r\nexport function controls_repeat_ext(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): string {\r\n  // Repeat n times.\r\n  let repeats;\r\n  if (block.getField('TIMES')) {\r\n    // Internal number.\r\n    repeats = String(Number(block.getFieldValue('TIMES')));\r\n  } else {\r\n    // External number.\r\n    repeats = generator.valueToCode(block, 'TIMES', Order.NONE) || '0';\r\n  }\r\n  if (stringUtils.isNumber(repeats)) {\r\n    repeats = parseInt(repeats, 10);\r\n  } else {\r\n    repeats = 'math.floor(' + repeats + ')';\r\n  }\r\n  let branch = generator.statementToCode(block, 'DO');\r\n  branch = generator.addLoopTrap(branch, block);\r\n  branch = addContinueLabel(branch, generator.INDENT);\r\n  const loopVar = generator.nameDB_!.getDistinctName(\r\n    'count',\r\n    NameType.VARIABLE,\r\n  );\r\n  const code =\r\n    'for ' + loopVar + ' = 1, ' + repeats + ' do\\n' + branch + 'end\\n';\r\n  return code;\r\n}\r\n\r\nexport const controls_repeat = controls_repeat_ext;\r\n\r\nexport function controls_whileUntil(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): string {\r\n  // Do while/until loop.\r\n  const until = block.getFieldValue('MODE') === 'UNTIL';\r\n  let argument0 =\r\n    generator.valueToCode(block, 'BOOL', until ? Order.UNARY : Order.NONE) ||\r\n    'false';\r\n  let branch = generator.statementToCode(block, 'DO');\r\n  branch = generator.addLoopTrap(branch, block);\r\n  branch = addContinueLabel(branch, generator.INDENT);\r\n  if (until) {\r\n    argument0 = 'not ' + argument0;\r\n  }\r\n  return 'while ' + argument0 + ' do\\n' + branch + 'end\\n';\r\n}\r\n\r\nexport function controls_for(block: Block, generator: LuaGenerator): string {\r\n  // For loop.\r\n  const variable0 = generator.getVariableName(block.getFieldValue('VAR'));\r\n  const startVar = generator.valueToCode(block, 'FROM', Order.NONE) || '0';\r\n  const endVar = generator.valueToCode(block, 'TO', Order.NONE) || '0';\r\n  const increment = generator.valueToCode(block, 'BY', Order.NONE) || '1';\r\n  let branch = generator.statementToCode(block, 'DO');\r\n  branch = generator.addLoopTrap(branch, block);\r\n  branch = addContinueLabel(branch, generator.INDENT);\r\n  let code = '';\r\n  let incValue;\r\n  if (\r\n    stringUtils.isNumber(startVar) &&\r\n    stringUtils.isNumber(endVar) &&\r\n    stringUtils.isNumber(increment)\r\n  ) {\r\n    // All arguments are simple numbers.\r\n    const up = Number(startVar) <= Number(endVar);\r\n    const step = Math.abs(Number(increment));\r\n    incValue = (up ? '' : '-') + step;\r\n  } else {\r\n    code = '';\r\n    // Determine loop direction at start, in case one of the bounds\r\n    // changes during loop execution.\r\n    incValue = generator.nameDB_!.getDistinctName(\r\n      variable0 + '_inc',\r\n      NameType.VARIABLE,\r\n    );\r\n    code += incValue + ' = ';\r\n    if (stringUtils.isNumber(increment)) {\r\n      code += Math.abs(increment as unknown as number) + '\\n';\r\n    } else {\r\n      code += 'math.abs(' + increment + ')\\n';\r\n    }\r\n    code += 'if (' + startVar + ') > (' + endVar + ') then\\n';\r\n    code += generator.INDENT + incValue + ' = -' + incValue + '\\n';\r\n    code += 'end\\n';\r\n  }\r\n  code +=\r\n    'for ' + variable0 + ' = ' + startVar + ', ' + endVar + ', ' + incValue;\r\n  code += ' do\\n' + branch + 'end\\n';\r\n  return code;\r\n}\r\n\r\nexport function controls_forEach(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): string {\r\n  // For each loop.\r\n  const variable0 = generator.getVariableName(block.getFieldValue('VAR'));\r\n  const argument0 = generator.valueToCode(block, 'LIST', Order.NONE) || '{}';\r\n  let branch = generator.statementToCode(block, 'DO');\r\n  branch = generator.addLoopTrap(branch, block);\r\n  branch = addContinueLabel(branch, generator.INDENT);\r\n  const code =\r\n    'for _, ' +\r\n    variable0 +\r\n    ' in ipairs(' +\r\n    argument0 +\r\n    ') do \\n' +\r\n    branch +\r\n    'end\\n';\r\n  return code;\r\n}\r\n\r\nexport function controls_flow_statements(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): string {\r\n  // Flow statements: continue, break.\r\n  let xfix = '';\r\n  if (generator.STATEMENT_PREFIX) {\r\n    // Automatic prefix insertion is switched off for this block.  Add manually.\r\n    xfix += generator.injectId(generator.STATEMENT_PREFIX, block);\r\n  }\r\n  if (generator.STATEMENT_SUFFIX) {\r\n    // Inject any statement suffix here since the regular one at the end\r\n    // will not get executed if the break/continue is triggered.\r\n    xfix += generator.injectId(generator.STATEMENT_SUFFIX, block);\r\n  }\r\n  if (generator.STATEMENT_PREFIX) {\r\n    const loop = (block as ControlFlowInLoopBlock).getSurroundLoop();\r\n    if (loop && !loop.suppressPrefixSuffix) {\r\n      // Inject loop's statement prefix here since the regular one at the end\r\n      // of the loop will not get executed if 'continue' is triggered.\r\n      // In the case of 'break', a prefix is needed due to the loop's suffix.\r\n      xfix += generator.injectId(generator.STATEMENT_PREFIX, loop);\r\n    }\r\n  }\r\n  switch (block.getFieldValue('FLOW')) {\r\n    case 'BREAK':\r\n      return xfix + 'break\\n';\r\n    case 'CONTINUE':\r\n      return xfix + CONTINUE_STATEMENT;\r\n  }\r\n  throw Error('Unknown flow statement.');\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for math blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.math\r\n\r\nimport type {Block} from '../../core/block.js';\r\nimport type {LuaGenerator} from './lua_generator.js';\r\nimport {Order} from './lua_generator.js';\r\n\r\nexport function math_number(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Numeric value.\r\n  const code = Number(block.getFieldValue('NUM'));\r\n  const order = code < 0 ? Order.UNARY : Order.ATOMIC;\r\n  return [String(code), order];\r\n}\r\n\r\nexport function math_arithmetic(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Basic arithmetic operators, and power.\r\n  const OPERATORS: Record<string, [string, Order]> = {\r\n    'ADD': [' + ', Order.ADDITIVE],\r\n    'MINUS': [' - ', Order.ADDITIVE],\r\n    'MULTIPLY': [' * ', Order.MULTIPLICATIVE],\r\n    'DIVIDE': [' / ', Order.MULTIPLICATIVE],\r\n    'POWER': [' ^ ', Order.EXPONENTIATION],\r\n  };\r\n  type OperatorOption = keyof typeof OPERATORS;\r\n  const tuple = OPERATORS[block.getFieldValue('OP') as OperatorOption];\r\n  const operator = tuple[0];\r\n  const order = tuple[1];\r\n  const argument0 = generator.valueToCode(block, 'A', order) || '0';\r\n  const argument1 = generator.valueToCode(block, 'B', order) || '0';\r\n  const code = argument0 + operator + argument1;\r\n  return [code, order];\r\n}\r\n\r\nexport function math_single(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Math operators with single operand.\r\n  const operator = block.getFieldValue('OP');\r\n  let arg;\r\n  if (operator === 'NEG') {\r\n    // Negation is a special case given its different operator precedence.\r\n    arg = generator.valueToCode(block, 'NUM', Order.UNARY) || '0';\r\n    return ['-' + arg, Order.UNARY];\r\n  }\r\n  if (operator === 'POW10') {\r\n    arg = generator.valueToCode(block, 'NUM', Order.EXPONENTIATION) || '0';\r\n    return ['10 ^ ' + arg, Order.EXPONENTIATION];\r\n  }\r\n  if (operator === 'ROUND') {\r\n    arg = generator.valueToCode(block, 'NUM', Order.ADDITIVE) || '0';\r\n  } else {\r\n    arg = generator.valueToCode(block, 'NUM', Order.NONE) || '0';\r\n  }\r\n\r\n  let code;\r\n  switch (operator) {\r\n    case 'ABS':\r\n      code = 'math.abs(' + arg + ')';\r\n      break;\r\n    case 'ROOT':\r\n      code = 'math.sqrt(' + arg + ')';\r\n      break;\r\n    case 'LN':\r\n      code = 'math.log(' + arg + ')';\r\n      break;\r\n    case 'LOG10':\r\n      code = 'math.log(' + arg + ', 10)';\r\n      break;\r\n    case 'EXP':\r\n      code = 'math.exp(' + arg + ')';\r\n      break;\r\n    case 'ROUND':\r\n      // This rounds up.  Blockly does not specify rounding direction.\r\n      code = 'math.floor(' + arg + ' + .5)';\r\n      break;\r\n    case 'ROUNDUP':\r\n      code = 'math.ceil(' + arg + ')';\r\n      break;\r\n    case 'ROUNDDOWN':\r\n      code = 'math.floor(' + arg + ')';\r\n      break;\r\n    case 'SIN':\r\n      code = 'math.sin(math.rad(' + arg + '))';\r\n      break;\r\n    case 'COS':\r\n      code = 'math.cos(math.rad(' + arg + '))';\r\n      break;\r\n    case 'TAN':\r\n      code = 'math.tan(math.rad(' + arg + '))';\r\n      break;\r\n    case 'ASIN':\r\n      code = 'math.deg(math.asin(' + arg + '))';\r\n      break;\r\n    case 'ACOS':\r\n      code = 'math.deg(math.acos(' + arg + '))';\r\n      break;\r\n    case 'ATAN':\r\n      code = 'math.deg(math.atan(' + arg + '))';\r\n      break;\r\n    default:\r\n      throw Error('Unknown math operator: ' + operator);\r\n  }\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function math_constant(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Constants: PI, E, the Golden Ratio, sqrt(2), 1/sqrt(2), INFINITY.\r\n  const CONSTANTS: Record<string, [string, Order]> = {\r\n    'PI': ['math.pi', Order.HIGH],\r\n    'E': ['math.exp(1)', Order.HIGH],\r\n    'GOLDEN_RATIO': ['(1 + math.sqrt(5)) / 2', Order.MULTIPLICATIVE],\r\n    'SQRT2': ['math.sqrt(2)', Order.HIGH],\r\n    'SQRT1_2': ['math.sqrt(1 / 2)', Order.HIGH],\r\n    'INFINITY': ['math.huge', Order.HIGH],\r\n  };\r\n  return CONSTANTS[block.getFieldValue('CONSTANT')];\r\n}\r\n\r\nexport function math_number_property(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Check if a number is even, odd, prime, whole, positive, or negative\r\n  // or if it is divisible by certain number. Returns true or false.\r\n  const PROPERTIES: Record<string, [string | null, Order, Order]> = {\r\n    'EVEN': [' % 2 == 0', Order.MULTIPLICATIVE, Order.RELATIONAL],\r\n    'ODD': [' % 2 == 1', Order.MULTIPLICATIVE, Order.RELATIONAL],\r\n    'WHOLE': [' % 1 == 0', Order.MULTIPLICATIVE, Order.RELATIONAL],\r\n    'POSITIVE': [' > 0', Order.RELATIONAL, Order.RELATIONAL],\r\n    'NEGATIVE': [' < 0', Order.RELATIONAL, Order.RELATIONAL],\r\n    'DIVISIBLE_BY': [null, Order.MULTIPLICATIVE, Order.RELATIONAL],\r\n    'PRIME': [null, Order.NONE, Order.HIGH],\r\n  };\r\n  const dropdownProperty = block.getFieldValue('PROPERTY');\r\n  const [suffix, inputOrder, outputOrder] = PROPERTIES[dropdownProperty];\r\n  const numberToCheck =\r\n    generator.valueToCode(block, 'NUMBER_TO_CHECK', inputOrder) || '0';\r\n  let code;\r\n  if (dropdownProperty === 'PRIME') {\r\n    // Prime is a special case as it is not a one-liner test.\r\n    const functionName = generator.provideFunction_(\r\n      'math_isPrime',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(n)\r\n  -- https://en.wikipedia.org/wiki/Primality_test#Naive_methods\r\n  if n == 2 or n == 3 then\r\n    return true\r\n  end\r\n  -- False if n is NaN, negative, is 1, or not whole.\r\n  -- And false if n is divisible by 2 or 3.\r\n  if not(n > 1) or n % 1 ~= 0 or n % 2 == 0 or n % 3 == 0 then\r\n    return false\r\n  end\r\n  -- Check all the numbers of form 6k +/- 1, up to sqrt(n).\r\n  for x = 6, math.sqrt(n) + 1.5, 6 do\r\n    if n % (x - 1) == 0 or n % (x + 1) == 0 then\r\n      return false\r\n    end\r\n  end\r\n  return true\r\nend\r\n`,\r\n    );\r\n    code = functionName + '(' + numberToCheck + ')';\r\n  } else if (dropdownProperty === 'DIVISIBLE_BY') {\r\n    const divisor =\r\n      generator.valueToCode(block, 'DIVISOR', Order.MULTIPLICATIVE) || '0';\r\n    // If 'divisor' is some code that evals to 0, generator will produce a nan.\r\n    // Let's produce nil if we can determine this at compile-time.\r\n    if (divisor === '0') {\r\n      return ['nil', Order.ATOMIC];\r\n    }\r\n    // The normal trick to implement ?: with and/or doesn't work here:\r\n    //   divisor == 0 and nil or number_to_check % divisor == 0\r\n    // because nil is false, so allow a runtime failure. :-(\r\n    code = numberToCheck + ' % ' + divisor + ' == 0';\r\n  } else {\r\n    code = numberToCheck + suffix;\r\n  }\r\n  return [code, outputOrder];\r\n}\r\n\r\nexport function math_change(block: Block, generator: LuaGenerator): string {\r\n  // Add to a variable in place.\r\n  const argument0 =\r\n    generator.valueToCode(block, 'DELTA', Order.ADDITIVE) || '0';\r\n  const varName = generator.getVariableName(block.getFieldValue('VAR'));\r\n  return varName + ' = ' + varName + ' + ' + argument0 + '\\n';\r\n}\r\n\r\n// Rounding functions have a single operand.\r\nexport const math_round = math_single;\r\n// Trigonometry functions have a single operand.\r\nexport const math_trig = math_single;\r\n\r\nexport function math_on_list(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Math functions for lists.\r\n  const func = block.getFieldValue('OP');\r\n  const list = generator.valueToCode(block, 'LIST', Order.NONE) || '{}';\r\n  let functionName;\r\n\r\n  // Functions needed in more than one case.\r\n  function provideSum() {\r\n    return generator.provideFunction_(\r\n      'math_sum',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  local result = 0\r\n  for _, v in ipairs(t) do\r\n    result = result + v\r\n  end\r\n  return result\r\nend\r\n`,\r\n    );\r\n  }\r\n\r\n  switch (func) {\r\n    case 'SUM':\r\n      functionName = provideSum();\r\n      break;\r\n\r\n    case 'MIN':\r\n      // Returns 0 for the empty list.\r\n      functionName = generator.provideFunction_(\r\n        'math_min',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  if #t == 0 then\r\n    return 0\r\n  end\r\n  local result = math.huge\r\n  for _, v in ipairs(t) do\r\n    if v < result then\r\n      result = v\r\n    end\r\n  end\r\n  return result\r\nend\r\n`,\r\n      );\r\n      break;\r\n\r\n    case 'AVERAGE':\r\n      // Returns 0 for the empty list.\r\n      functionName = generator.provideFunction_(\r\n        'math_average',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  if #t == 0 then\r\n    return 0\r\n  end\r\n  return ${provideSum()}(t) / #t\r\nend\r\n`,\r\n      );\r\n      break;\r\n\r\n    case 'MAX':\r\n      // Returns 0 for the empty list.\r\n      functionName = generator.provideFunction_(\r\n        'math_max',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  if #t == 0 then\r\n    return 0\r\n  end\r\n  local result = -math.huge\r\n  for _, v in ipairs(t) do\r\n    if v > result then\r\n      result = v\r\n    end\r\n  end\r\n  return result\r\nend\r\n`,\r\n      );\r\n      break;\r\n\r\n    case 'MEDIAN':\r\n      // This operation excludes non-numbers.\r\n      functionName = generator.provideFunction_(\r\n        'math_median',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  -- Source: http://lua-users.org/wiki/SimpleStats\r\n  if #t == 0 then\r\n    return 0\r\n  end\r\n  local temp = {}\r\n  for _, v in ipairs(t) do\r\n    if type(v) == 'number' then\r\n      table.insert(temp, v)\r\n    end\r\n  end\r\n  table.sort(temp)\r\n  if #temp % 2 == 0 then\r\n    return (temp[#temp / 2] + temp[(#temp / 2) + 1]) / 2\r\n  else\r\n    return temp[math.ceil(#temp / 2)]\r\n  end\r\nend\r\n`,\r\n      );\r\n      break;\r\n\r\n    case 'MODE':\r\n      // As a list of numbers can contain more than one mode,\r\n      // the returned result is provided as an array.\r\n      // The generator version includes non-numbers.\r\n      functionName = generator.provideFunction_(\r\n        'math_modes',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  -- Source: http://lua-users.org/wiki/SimpleStats\r\n  local counts = {}\r\n  for _, v in ipairs(t) do\r\n    if counts[v] == nil then\r\n      counts[v] = 1\r\n    else\r\n      counts[v] = counts[v] + 1\r\n    end\r\n  end\r\n  local biggestCount = 0\r\n  for _, v  in pairs(counts) do\r\n    if v > biggestCount then\r\n      biggestCount = v\r\n    end\r\n  end\r\n  local temp = {}\r\n  for k, v in pairs(counts) do\r\n    if v == biggestCount then\r\n      table.insert(temp, k)\r\n    end\r\n  end\r\n  return temp\r\nend\r\n`,\r\n      );\r\n      break;\r\n\r\n    case 'STD_DEV':\r\n      functionName = generator.provideFunction_(\r\n        'math_standard_deviation',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  local m\r\n  local vm\r\n  local total = 0\r\n  local count = 0\r\n  local result\r\n  m = #t == 0 and 0 or ${provideSum()}(t) / #t\r\n  for _, v in ipairs(t) do\r\n    if type(v) == 'number' then\r\n      vm = v - m\r\n      total = total + (vm * vm)\r\n      count = count + 1\r\n    end\r\n  end\r\n  result = math.sqrt(total / (count-1))\r\n  return result\r\nend\r\n`,\r\n      );\r\n      break;\r\n\r\n    case 'RANDOM':\r\n      functionName = generator.provideFunction_(\r\n        'math_random_list',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(t)\r\n  if #t == 0 then\r\n    return nil\r\n  end\r\n  return t[math.random(#t)]\r\nend\r\n`,\r\n      );\r\n      break;\r\n\r\n    default:\r\n      throw Error('Unknown operator: ' + func);\r\n  }\r\n  return [functionName + '(' + list + ')', Order.HIGH];\r\n}\r\n\r\nexport function math_modulo(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Remainder computation.\r\n  const argument0 =\r\n    generator.valueToCode(block, 'DIVIDEND', Order.MULTIPLICATIVE) || '0';\r\n  const argument1 =\r\n    generator.valueToCode(block, 'DIVISOR', Order.MULTIPLICATIVE) || '0';\r\n  const code = argument0 + ' % ' + argument1;\r\n  return [code, Order.MULTIPLICATIVE];\r\n}\r\n\r\nexport function math_constrain(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Constrain a number between two limits.\r\n  const argument0 = generator.valueToCode(block, 'VALUE', Order.NONE) || '0';\r\n  const argument1 =\r\n    generator.valueToCode(block, 'LOW', Order.NONE) || '-math.huge';\r\n  const argument2 =\r\n    generator.valueToCode(block, 'HIGH', Order.NONE) || 'math.huge';\r\n  const code =\r\n    'math.min(math.max(' +\r\n    argument0 +\r\n    ', ' +\r\n    argument1 +\r\n    '), ' +\r\n    argument2 +\r\n    ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function math_random_int(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Random integer between [X] and [Y].\r\n  const argument0 = generator.valueToCode(block, 'FROM', Order.NONE) || '0';\r\n  const argument1 = generator.valueToCode(block, 'TO', Order.NONE) || '0';\r\n  const code = 'math.random(' + argument0 + ', ' + argument1 + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function math_random_float(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Random fraction between 0 and 1.\r\n  return ['math.random()', Order.HIGH];\r\n}\r\n\r\nexport function math_atan2(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Arctangent of point (X, Y) in degrees from -180 to 180.\r\n  const argument0 = generator.valueToCode(block, 'X', Order.NONE) || '0';\r\n  const argument1 = generator.valueToCode(block, 'Y', Order.NONE) || '0';\r\n  return [\r\n    'math.deg(math.atan2(' + argument1 + ', ' + argument0 + '))',\r\n    Order.HIGH,\r\n  ];\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for procedure blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.procedures\r\n\r\nimport type {IfReturnBlock} from '../../blocks/procedures.js';\r\nimport type {Block} from '../../core/block.js';\r\nimport type {LuaGenerator} from './lua_generator.js';\r\nimport {Order} from './lua_generator.js';\r\n\r\nexport function procedures_defreturn(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): null {\r\n  // Define a procedure with a return value.\r\n  const funcName = generator.getProcedureName(block.getFieldValue('NAME'));\r\n  let xfix1 = '';\r\n  if (generator.STATEMENT_PREFIX) {\r\n    xfix1 += generator.injectId(generator.STATEMENT_PREFIX, block);\r\n  }\r\n  if (generator.STATEMENT_SUFFIX) {\r\n    xfix1 += generator.injectId(generator.STATEMENT_SUFFIX, block);\r\n  }\r\n  if (xfix1) {\r\n    xfix1 = generator.prefixLines(xfix1, generator.INDENT);\r\n  }\r\n  let loopTrap = '';\r\n  if (generator.INFINITE_LOOP_TRAP) {\r\n    loopTrap = generator.prefixLines(\r\n      generator.injectId(generator.INFINITE_LOOP_TRAP, block),\r\n      generator.INDENT,\r\n    );\r\n  }\r\n  let branch = '';\r\n  if (block.getInput('STACK')) {\r\n    // The 'procedures_defreturn' block might not have a STACK input.\r\n    branch = generator.statementToCode(block, 'STACK');\r\n  }\r\n  let returnValue = '';\r\n  if (block.getInput('RETURN')) {\r\n    // The 'procedures_defnoreturn' block (which shares this code)\r\n    // does not have a RETURN input.\r\n    returnValue = generator.valueToCode(block, 'RETURN', Order.NONE) || '';\r\n  }\r\n  let xfix2 = '';\r\n  if (branch && returnValue) {\r\n    // After executing the function body, revisit this block for the return.\r\n    xfix2 = xfix1;\r\n  }\r\n  if (returnValue) {\r\n    returnValue = generator.INDENT + 'return ' + returnValue + '\\n';\r\n  } else if (!branch) {\r\n    branch = '';\r\n  }\r\n  const args = [];\r\n  const variables = block.getVars();\r\n  for (let i = 0; i < variables.length; i++) {\r\n    args[i] = generator.getVariableName(variables[i]);\r\n  }\r\n  let code =\r\n    'function ' +\r\n    funcName +\r\n    '(' +\r\n    args.join(', ') +\r\n    ')\\n' +\r\n    xfix1 +\r\n    loopTrap +\r\n    branch +\r\n    xfix2 +\r\n    returnValue +\r\n    'end\\n';\r\n  code = generator.scrub_(block, code);\r\n  // Add % so as not to collide with helper functions in definitions list.\r\n  // TODO(#7600): find better approach than casting to any to override\r\n  // CodeGenerator declaring .definitions protected.\r\n  (generator as AnyDuringMigration).definitions_['%' + funcName] = code;\r\n  return null;\r\n}\r\n\r\n// Defining a procedure without a return value uses the same generator as\r\n// a procedure with a return value.\r\nexport const procedures_defnoreturn = procedures_defreturn;\r\n\r\nexport function procedures_callreturn(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Call a procedure with a return value.\r\n  const funcName = generator.getProcedureName(block.getFieldValue('NAME'));\r\n  const args = [];\r\n  const variables = block.getVars();\r\n  for (let i = 0; i < variables.length; i++) {\r\n    args[i] = generator.valueToCode(block, 'ARG' + i, Order.NONE) || 'nil';\r\n  }\r\n  const code = funcName + '(' + args.join(', ') + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function procedures_callnoreturn(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): string {\r\n  // Call a procedure with no return value.\r\n  // Generated code is for a function call as a statement is the same as a\r\n  // function call as a value, with the addition of line ending.\r\n  const tuple = generator.forBlock['procedures_callreturn'](\r\n    block,\r\n    generator,\r\n  ) as [string, number];\r\n  return tuple[0] + '\\n';\r\n}\r\n\r\nexport function procedures_ifreturn(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): string {\r\n  // Conditionally return value from a procedure.\r\n  const condition =\r\n    generator.valueToCode(block, 'CONDITION', Order.NONE) || 'false';\r\n  let code = 'if ' + condition + ' then\\n';\r\n  if (generator.STATEMENT_SUFFIX) {\r\n    // Inject any statement suffix here since the regular one at the end\r\n    // will not get executed if the return is triggered.\r\n    code += generator.prefixLines(\r\n      generator.injectId(generator.STATEMENT_SUFFIX, block),\r\n      generator.INDENT,\r\n    );\r\n  }\r\n  if ((block as IfReturnBlock).hasReturnValue_) {\r\n    const value = generator.valueToCode(block, 'VALUE', Order.NONE) || 'nil';\r\n    code += generator.INDENT + 'return ' + value + '\\n';\r\n  } else {\r\n    code += generator.INDENT + 'return\\n';\r\n  }\r\n  code += 'end\\n';\r\n  return code;\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for text blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.texts\r\n\r\nimport type {JoinMutatorBlock} from '../../blocks/text.js';\r\nimport type {Block} from '../../core/block.js';\r\nimport type {LuaGenerator} from './lua_generator.js';\r\nimport {Order} from './lua_generator.js';\r\n\r\nexport function text(block: Block, generator: LuaGenerator): [string, Order] {\r\n  // Text value.\r\n  const code = generator.quote_(block.getFieldValue('TEXT'));\r\n  return [code, Order.ATOMIC];\r\n}\r\n\r\nexport function text_join(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  const joinBlock = block as JoinMutatorBlock;\r\n  // Create a string made up of any number of elements of any type.\r\n  if (joinBlock.itemCount_ === 0) {\r\n    return [\"''\", Order.ATOMIC];\r\n  } else if (joinBlock.itemCount_ === 1) {\r\n    const element = generator.valueToCode(block, 'ADD0', Order.NONE) || \"''\";\r\n    const code = 'tostring(' + element + ')';\r\n    return [code, Order.HIGH];\r\n  } else if (joinBlock.itemCount_ === 2) {\r\n    const element0 =\r\n      generator.valueToCode(block, 'ADD0', Order.CONCATENATION) || \"''\";\r\n    const element1 =\r\n      generator.valueToCode(block, 'ADD1', Order.CONCATENATION) || \"''\";\r\n    const code = element0 + ' .. ' + element1;\r\n    return [code, Order.CONCATENATION];\r\n  } else {\r\n    const elements = [];\r\n    for (let i = 0; i < joinBlock.itemCount_; i++) {\r\n      elements[i] = generator.valueToCode(block, 'ADD' + i, Order.NONE) || \"''\";\r\n    }\r\n    const code = 'table.concat({' + elements.join(', ') + '})';\r\n    return [code, Order.HIGH];\r\n  }\r\n}\r\n\r\nexport function text_append(block: Block, generator: LuaGenerator): string {\r\n  // Append to a variable in place.\r\n  const varName = generator.getVariableName(block.getFieldValue('VAR'));\r\n  const value =\r\n    generator.valueToCode(block, 'TEXT', Order.CONCATENATION) || \"''\";\r\n  return varName + ' = ' + varName + ' .. ' + value + '\\n';\r\n}\r\n\r\nexport function text_length(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // String or array length.\r\n  const text = generator.valueToCode(block, 'VALUE', Order.UNARY) || \"''\";\r\n  return ['#' + text, Order.UNARY];\r\n}\r\n\r\nexport function text_isEmpty(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Is the string null or array empty?\r\n  const text = generator.valueToCode(block, 'VALUE', Order.UNARY) || \"''\";\r\n  return ['#' + text + ' == 0', Order.RELATIONAL];\r\n}\r\n\r\nexport function text_indexOf(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Search the text for a substring.\r\n  const substring = generator.valueToCode(block, 'FIND', Order.NONE) || \"''\";\r\n  const text = generator.valueToCode(block, 'VALUE', Order.NONE) || \"''\";\r\n  let functionName;\r\n  if (block.getFieldValue('END') === 'FIRST') {\r\n    functionName = generator.provideFunction_(\r\n      'firstIndexOf',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(str, substr)\r\n  local i = string.find(str, substr, 1, true)\r\n  if i == nil then\r\n    return 0\r\n  end\r\n  return i\r\nend\r\n`,\r\n    );\r\n  } else {\r\n    functionName = generator.provideFunction_(\r\n      'lastIndexOf',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(str, substr)\r\n  local i = string.find(string.reverse(str), string.reverse(substr), 1, true)\r\n  if i then\r\n    return #str + 2 - i - #substr\r\n  end\r\n  return 0\r\nend\r\n`,\r\n    );\r\n  }\r\n  const code = functionName + '(' + text + ', ' + substring + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function text_charAt(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Get letter at index.\r\n  // Note: Until January 2013 this block did not have the WHERE input.\r\n  const where = block.getFieldValue('WHERE') || 'FROM_START';\r\n  const text = generator.valueToCode(block, 'VALUE', Order.NONE) || \"''\";\r\n  let code;\r\n  if (where === 'RANDOM') {\r\n    const functionName = generator.provideFunction_(\r\n      'text_random_letter',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(str)\r\n  local index = math.random(string.len(str))\r\n  return string.sub(str, index, index)\r\nend\r\n`,\r\n    );\r\n    code = functionName + '(' + text + ')';\r\n  } else {\r\n    let start;\r\n    if (where === 'FIRST') {\r\n      start = '1';\r\n    } else if (where === 'LAST') {\r\n      start = '-1';\r\n    } else {\r\n      const atOrder = where === 'FROM_END' ? Order.UNARY : Order.NONE;\r\n      const at = generator.valueToCode(block, 'AT', atOrder) || '1';\r\n      if (where === 'FROM_START') {\r\n        start = at;\r\n      } else if (where === 'FROM_END') {\r\n        start = '-' + at;\r\n      } else {\r\n        throw Error('Unhandled option (text_charAt).');\r\n      }\r\n    }\r\n    if (start.match(/^-?\\w*$/)) {\r\n      code = 'string.sub(' + text + ', ' + start + ', ' + start + ')';\r\n    } else {\r\n      // use function to avoid reevaluation\r\n      const functionName = generator.provideFunction_(\r\n        'text_char_at',\r\n        `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(str, index)\r\n  return string.sub(str, index, index)\r\nend\r\n`,\r\n      );\r\n      code = functionName + '(' + text + ', ' + start + ')';\r\n    }\r\n  }\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function text_getSubstring(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Get substring.\r\n  const text = generator.valueToCode(block, 'STRING', Order.NONE) || \"''\";\r\n\r\n  // Get start index.\r\n  const where1 = block.getFieldValue('WHERE1');\r\n  const at1Order = where1 === 'FROM_END' ? Order.UNARY : Order.NONE;\r\n  const at1 = generator.valueToCode(block, 'AT1', at1Order) || '1';\r\n  let start;\r\n  if (where1 === 'FIRST') {\r\n    start = 1;\r\n  } else if (where1 === 'FROM_START') {\r\n    start = at1;\r\n  } else if (where1 === 'FROM_END') {\r\n    start = '-' + at1;\r\n  } else {\r\n    throw Error('Unhandled option (text_getSubstring)');\r\n  }\r\n\r\n  // Get end index.\r\n  const where2 = block.getFieldValue('WHERE2');\r\n  const at2Order = where2 === 'FROM_END' ? Order.UNARY : Order.NONE;\r\n  const at2 = generator.valueToCode(block, 'AT2', at2Order) || '1';\r\n  let end;\r\n  if (where2 === 'LAST') {\r\n    end = -1;\r\n  } else if (where2 === 'FROM_START') {\r\n    end = at2;\r\n  } else if (where2 === 'FROM_END') {\r\n    end = '-' + at2;\r\n  } else {\r\n    throw Error('Unhandled option (text_getSubstring)');\r\n  }\r\n  const code = 'string.sub(' + text + ', ' + start + ', ' + end + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function text_changeCase(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Change capitalization.\r\n  const operator = block.getFieldValue('CASE');\r\n  const text = generator.valueToCode(block, 'TEXT', Order.NONE) || \"''\";\r\n  let functionName;\r\n  if (operator === 'UPPERCASE') {\r\n    functionName = 'string.upper';\r\n  } else if (operator === 'LOWERCASE') {\r\n    functionName = 'string.lower';\r\n  } else if (operator === 'TITLECASE') {\r\n    // There are shorter versions at\r\n    // http://lua-users.org/wiki/SciteTitleCase\r\n    // that do not preserve whitespace.\r\n    functionName = generator.provideFunction_(\r\n      'text_titlecase',\r\n      `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(str)\r\n  local buf = {}\r\n  local inWord = false\r\n  for i = 1, #str do\r\n    local c = string.sub(str, i, i)\r\n    if inWord then\r\n      table.insert(buf, string.lower(c))\r\n      if string.find(c, \"%s\") then\r\n        inWord = false\r\n      end\r\n    else\r\n      table.insert(buf, string.upper(c))\r\n      inWord = true\r\n    end\r\n  end\r\n  return table.concat(buf)\r\nend\r\n`,\r\n    );\r\n  }\r\n  const code = functionName + '(' + text + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function text_trim(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Trim spaces.\r\n  const OPERATORS = {LEFT: '^%s*(,-)', RIGHT: '(.-)%s*$', BOTH: '^%s*(.-)%s*$'};\r\n  type OperatorOption = keyof typeof OPERATORS;\r\n  const operator = OPERATORS[block.getFieldValue('MODE') as OperatorOption];\r\n  const text = generator.valueToCode(block, 'TEXT', Order.NONE) || \"''\";\r\n  const code = 'string.gsub(' + text + ', \"' + operator + '\", \"%1\")';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function text_print(block: Block, generator: LuaGenerator): string {\r\n  // Print statement.\r\n  const msg = generator.valueToCode(block, 'TEXT', Order.NONE) || \"''\";\r\n  return 'print(' + msg + ')\\n';\r\n}\r\n\r\nexport function text_prompt_ext(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Prompt function.\r\n  let msg;\r\n  if (block.getField('TEXT')) {\r\n    // Internal message.\r\n    msg = generator.quote_(block.getFieldValue('TEXT'));\r\n  } else {\r\n    // External message.\r\n    msg = generator.valueToCode(block, 'TEXT', Order.NONE) || \"''\";\r\n  }\r\n\r\n  const functionName = generator.provideFunction_(\r\n    'text_prompt',\r\n    `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(msg)\r\n  io.write(msg)\r\n  io.flush()\r\n  return io.read()\r\nend\r\n`,\r\n  );\r\n  let code = functionName + '(' + msg + ')';\r\n\r\n  const toNumber = block.getFieldValue('TYPE') === 'NUMBER';\r\n  if (toNumber) {\r\n    code = 'tonumber(' + code + ', 10)';\r\n  }\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport const text_prompt = text_prompt_ext;\r\n\r\nexport function text_count(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  const text = generator.valueToCode(block, 'TEXT', Order.NONE) || \"''\";\r\n  const sub = generator.valueToCode(block, 'SUB', Order.NONE) || \"''\";\r\n  const functionName = generator.provideFunction_(\r\n    'text_count',\r\n    `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle)\r\n  if #needle == 0 then\r\n    return #haystack + 1\r\n  end\r\n  local i = 1\r\n  local count = 0\r\n  while true do\r\n    i = string.find(haystack, needle, i, true)\r\n    if i == nil then\r\n      break\r\n    end\r\n    count = count + 1\r\n    i = i + #needle\r\n  end\r\n  return count\r\nend\r\n`,\r\n  );\r\n  const code = functionName + '(' + text + ', ' + sub + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function text_replace(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  const text = generator.valueToCode(block, 'TEXT', Order.NONE) || \"''\";\r\n  const from = generator.valueToCode(block, 'FROM', Order.NONE) || \"''\";\r\n  const to = generator.valueToCode(block, 'TO', Order.NONE) || \"''\";\r\n  const functionName = generator.provideFunction_(\r\n    'text_replace',\r\n    `\r\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement)\r\n  local buf = {}\r\n  local i = 1\r\n  while i <= #haystack do\r\n    if string.sub(haystack, i, i + #needle - 1) == needle then\r\n      for j = 1, #replacement do\r\n        table.insert(buf, string.sub(replacement, j, j))\r\n      end\r\n      i = i + #needle\r\n    else\r\n      table.insert(buf, string.sub(haystack, i, i))\r\n      i = i + 1\r\n    end\r\n  end\r\n  return table.concat(buf)\r\nend\r\n`,\r\n  );\r\n  const code = functionName + '(' + text + ', ' + from + ', ' + to + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n\r\nexport function text_reverse(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  const text = generator.valueToCode(block, 'TEXT', Order.NONE) || \"''\";\r\n  const code = 'string.reverse(' + text + ')';\r\n  return [code, Order.HIGH];\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for variable blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.variables\r\n\r\nimport type {Block} from '../../core/block.js';\r\nimport type {LuaGenerator} from './lua_generator.js';\r\nimport {Order} from './lua_generator.js';\r\n\r\nexport function variables_get(\r\n  block: Block,\r\n  generator: LuaGenerator,\r\n): [string, Order] {\r\n  // Variable getter.\r\n  const code = generator.getVariableName(block.getFieldValue('VAR'));\r\n  return [code, Order.ATOMIC];\r\n}\r\n\r\nexport function variables_set(block: Block, generator: LuaGenerator): string {\r\n  // Variable setter.\r\n  const argument0 = generator.valueToCode(block, 'VALUE', Order.NONE) || '0';\r\n  const varName = generator.getVariableName(block.getFieldValue('VAR'));\r\n  return varName + ' = ' + argument0 + '\\n';\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2016 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Lua code generator class, including helper methods for\r\n * generating Lua for blocks.\r\n *\r\n * Based on Ellen Spertus's blocky-lua project.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua\r\n\r\nimport type {Block} from '../../core/block.js';\r\nimport {CodeGenerator} from '../../core/generator.js';\r\nimport {inputTypes} from '../../core/inputs/input_types.js';\r\nimport {Names} from '../../core/names.js';\r\nimport * as stringUtils from '../../core/utils/string.js';\r\nimport type {Workspace} from '../../core/workspace.js';\r\n\r\n/**\r\n * Order of operation ENUMs.\r\n * http://www.lua.org/manual/5.3/manual.html#3.4.8\r\n */\r\n// prettier-ignore\r\nexport enum Order {\r\n  ATOMIC = 0,    // literals\r\n  // The next level was not explicit in documentation and inferred by Ellen.\r\n  HIGH = 1,            // Function calls, tables[]\r\n  EXPONENTIATION = 2,  // ^\r\n  UNARY = 3,           // not # - ~\r\n  MULTIPLICATIVE = 4,  // * / %\r\n  ADDITIVE = 5,        // + -\r\n  CONCATENATION = 6,   // ..\r\n  RELATIONAL = 7,      // < > <=  >= ~= ==\r\n  AND = 8,             // and\r\n  OR = 9,              // or\r\n  NONE = 99,\r\n}\r\n\r\n/**\r\n * Lua code generator class.\r\n *\r\n * Note: Lua is not supporting zero-indexing since the language itself is\r\n * one-indexed, so the generator does not repoct the oneBasedIndex configuration\r\n * option used for lists and text.\r\n */\r\nexport class LuaGenerator extends CodeGenerator {\r\n  constructor(name = 'Lua') {\r\n    super(name);\r\n    this.isInitialized = false;\r\n\r\n    // Copy Order values onto instance for backwards compatibility\r\n    // while ensuring they are not part of the publically-advertised\r\n    // API.\r\n    //\r\n    // TODO(#7085): deprecate these in due course.  (Could initially\r\n    // replace data properties with get accessors that call\r\n    // deprecate.warn().)\r\n    for (const key in Order) {\r\n      // Must assign Order[key] to a temporary to get the type guard to work;\r\n      // see https://github.com/microsoft/TypeScript/issues/10530.\r\n      const value = Order[key];\r\n      // Skip reverse-lookup entries in the enum.  Due to\r\n      // https://github.com/microsoft/TypeScript/issues/55713 this (as\r\n      // of TypeScript 5.5.2) actually narrows the type of value to\r\n      // never - but that still allows the following assignment to\r\n      // succeed.\r\n      if (typeof value === 'string') continue;\r\n      (this as unknown as Record<string, Order>)['ORDER_' + key] = value;\r\n    }\r\n\r\n    // List of illegal variable names.  This is not intended to be a\r\n    // security feature.  Blockly is 100% client-side, so bypassing\r\n    // this list is trivial.  This is intended to prevent users from\r\n    // accidentally clobbering a built-in object or function.\r\n    this.addReservedWords(\r\n      // Special character\r\n      '_,' +\r\n        // From theoriginalbit's script:\r\n        // https://github.com/espertus/blockly-lua/issues/6\r\n        '__inext,assert,bit,colors,colours,coroutine,disk,dofile,error,fs,' +\r\n        'fetfenv,getmetatable,gps,help,io,ipairs,keys,loadfile,loadstring,math,' +\r\n        'native,next,os,paintutils,pairs,parallel,pcall,peripheral,print,' +\r\n        'printError,rawequal,rawget,rawset,read,rednet,redstone,rs,select,' +\r\n        'setfenv,setmetatable,sleep,string,table,term,textutils,tonumber,' +\r\n        'tostring,turtle,type,unpack,vector,write,xpcall,_VERSION,__indext,' +\r\n        // Not included in the script, probably because it wasn't enabled:\r\n        'HTTP,' +\r\n        // Keywords (http://www.lua.org/pil/1.3.html).\r\n        'and,break,do,else,elseif,end,false,for,function,if,in,local,nil,not,' +\r\n        'or,repeat,return,then,true,until,while,' +\r\n        // Metamethods (http://www.lua.org/manual/5.2/manual.html).\r\n        'add,sub,mul,div,mod,pow,unm,concat,len,eq,lt,le,index,newindex,call,' +\r\n        // Basic functions (http://www.lua.org/manual/5.2/manual.html,\r\n        // section 6.1).\r\n        'assert,collectgarbage,dofile,error,_G,getmetatable,inpairs,load,' +\r\n        'loadfile,next,pairs,pcall,print,rawequal,rawget,rawlen,rawset,select,' +\r\n        'setmetatable,tonumber,tostring,type,_VERSION,xpcall,' +\r\n        // Modules (http://www.lua.org/manual/5.2/manual.html, section 6.3).\r\n        'require,package,string,table,math,bit32,io,file,os,debug',\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Initialise the database of variable names.\r\n   *\r\n   * @param workspace Workspace to generate code from.\r\n   */\r\n  init(workspace: Workspace) {\r\n    // Call Blockly.CodeGenerator's init.\r\n    super.init(workspace);\r\n\r\n    if (!this.nameDB_) {\r\n      this.nameDB_ = new Names(this.RESERVED_WORDS_);\r\n    } else {\r\n      this.nameDB_.reset();\r\n    }\r\n    this.nameDB_.setVariableMap(workspace.getVariableMap());\r\n    this.nameDB_.populateVariables(workspace);\r\n    this.nameDB_.populateProcedures(workspace);\r\n\r\n    this.isInitialized = true;\r\n  }\r\n\r\n  /**\r\n   * Prepend the generated code with the variable definitions.\r\n   *\r\n   * @param code Generated code.\r\n   * @returns Completed code.\r\n   */\r\n  finish(code: string): string {\r\n    // Convert the definitions dictionary into a list.\r\n    const definitions = Object.values(this.definitions_);\r\n    // Call Blockly.CodeGenerator's finish.\r\n    code = super.finish(code);\r\n    this.isInitialized = false;\r\n\r\n    this.nameDB_!.reset();\r\n    return definitions.join('\\n\\n') + '\\n\\n\\n' + code;\r\n  }\r\n\r\n  /**\r\n   * Naked values are top-level blocks with outputs that aren't plugged into\r\n   * anything. In Lua, an expression is not a legal statement, so we must assign\r\n   * the value to the (conventionally ignored) _.\r\n   * http://lua-users.org/wiki/ExpressionsAsStatements\r\n   *\r\n   * @param line Line of generated code.\r\n   * @return Legal line of code.\r\n   */\r\n  scrubNakedValue(line: string): string {\r\n    return 'local _ = ' + line + '\\n';\r\n  }\r\n\r\n  /**\r\n   * Encode a string as a properly escaped Lua string, complete with\r\n   * quotes.\r\n   *\r\n   * @param string Text to encode.\r\n   * @returns Lua string.\r\n   */\r\n  quote_(string: string): string {\r\n    string = string\r\n      .replace(/\\\\/g, '\\\\\\\\')\r\n      .replace(/\\n/g, '\\\\\\n')\r\n      .replace(/'/g, \"\\\\'\");\r\n    return \"'\" + string + \"'\";\r\n  }\r\n\r\n  /**\r\n   * Encode a string as a properly escaped multiline Lua string, complete with\r\n   * quotes.\r\n   *\r\n   * @param string Text to encode.\r\n   * @returns Lua string.\r\n   */\r\n  multiline_quote_(string: string): string {\r\n    const lines = string.split(/\\n/g).map(this.quote_);\r\n    // Join with the following, plus a newline:\r\n    // .. '\\n' ..\r\n    return lines.join(\" .. '\\\\n' ..\\n\");\r\n  }\r\n\r\n  /**\r\n   * Common tasks for generating Lua from blocks.\r\n   * Handles comments for the specified block and any connected value blocks.\r\n   * Calls any statements following this block.\r\n   * @param block The current block.\r\n   * @param code The Lua code created for this block.\r\n   * @param thisOnly True to generate code for only this statement.\r\n   * @returns Lua code with comments and subsequent blocks added.\r\n   */\r\n  scrub_(block: Block, code: string, thisOnly = false): string {\r\n    let commentCode = '';\r\n    // Only collect comments for blocks that aren't inline.\r\n    if (!block.outputConnection || !block.outputConnection.targetConnection) {\r\n      // Collect comment for this block.\r\n      let comment = block.getCommentText();\r\n      if (comment) {\r\n        comment = stringUtils.wrap(comment, this.COMMENT_WRAP - 3);\r\n        commentCode += this.prefixLines(comment, '-- ') + '\\n';\r\n      }\r\n      // Collect comments for all value arguments.\r\n      // Don't collect comments for nested statements.\r\n      for (let i = 0; i < block.inputList.length; i++) {\r\n        if (block.inputList[i].type === inputTypes.VALUE) {\r\n          const childBlock = block.inputList[i].connection!.targetBlock();\r\n          if (childBlock) {\r\n            comment = this.allNestedComments(childBlock);\r\n            if (comment) {\r\n              commentCode += this.prefixLines(comment, '-- ');\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const nextBlock =\r\n      block.nextConnection && block.nextConnection.targetBlock();\r\n    const nextCode = thisOnly ? '' : this.blockToCode(nextBlock);\r\n    return commentCode + code + nextCode;\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright 2018 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Generating Lua for dynamic variable blocks.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.variablesDynamic\r\n\r\n// Lua is dynamically typed.\r\nexport {\r\n  variables_get as variables_get_dynamic,\r\n  variables_set as variables_set_dynamic,\r\n} from './variables.js';\r\n","/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n * SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\n/**\r\n * @file Complete helper functions for generating Lua for\r\n *     blocks.  This is the entrypoint for lua_compressed.js.\r\n */\r\n\r\n// Former goog.module ID: Blockly.Lua.all\r\n\r\nimport * as lists from './lua/lists.js';\r\nimport * as logic from './lua/logic.js';\r\nimport * as loops from './lua/loops.js';\r\nimport {LuaGenerator} from './lua/lua_generator.js';\r\nimport * as math from './lua/math.js';\r\nimport * as procedures from './lua/procedures.js';\r\nimport * as text from './lua/text.js';\r\nimport * as variables from './lua/variables.js';\r\nimport * as variablesDynamic from './lua/variables_dynamic.js';\r\n\r\nexport * from './lua/lua_generator.js';\r\n\r\n/**\r\n * Lua code generator instance.\r\n */\r\nexport const luaGenerator = new LuaGenerator();\r\n\r\n// Install per-block-type generator functions:\r\nconst generators: typeof luaGenerator.forBlock = {\r\n  ...lists,\r\n  ...logic,\r\n  ...loops,\r\n  ...math,\r\n  ...procedures,\r\n  ...text,\r\n  ...variables,\r\n  ...variablesDynamic,\r\n};\r\nfor (const name in generators) {\r\n  luaGenerator.forBlock[name] = generators[name];\r\n}\r\n"]}